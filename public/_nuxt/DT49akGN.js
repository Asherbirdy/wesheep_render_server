import{ai as B,e as ee,ag as O,h as k,c as f,b as V,w as i,l as o,ah as te,o as l,d,a as r,F as _,r as m,j as v,t as a}from"./CJ1hmjfG.js";import{U as re}from"./Ca4tM4z1.js";import{_ as le}from"./BuM1IXhH.js";import{u as ne}from"./wnGBfK5N.js";import{R as z}from"./yGGtjXql.js";import{u as L}from"./CGG-KMyI.js";import"./B9xwmjdC.js";import"./D4vmFw8Y.js";import"./BjWZF5t_.js";import"./DGu7XBlB.js";const P={getAll:async()=>await L(B.MeetingCenter,{method:"GET",server:!1}),create:async()=>await L(B.MeetingCenter,{method:"POST",server:!1,lazy:!0,immediate:!1})},se={class:"pb-20"},oe={class:"flex flex-wrap gap-2"},ae={class:"flex flex-wrap gap-2"},ie={class:"flex flex-wrap gap-2"},ue={class:"flex flex-wrap gap-2"},fe={class:"font-bold"},de={class:"flex flex-wrap gap-2"},pe={class:"flex flex-wrap gap-2"},ce={class:"flex flex-wrap gap-2"},_e={class:"flex flex-wrap gap-2"},me={class:"font-bold"},ve={class:"flex flex-wrap gap-2"},ge={class:"flex flex-wrap gap-2"},xe={class:"flex flex-wrap gap-2"},ye={class:"flex flex-wrap gap-2"},we={class:"flex flex-wrap gap-2"},ke={class:"flex flex-wrap gap-2"},Fe=ee({__name:"meetingCenter",async setup(Re){let x,R;const{data:S}=ne(B.UserShowMe),{data:$,refresh:H}=([x,R]=O(()=>P.getAll()),x=await x,R(),x),{execute:J,status:K}=([x,R]=O(()=>P.create()),x=await x,R(),x),g=k(()=>{var s;return(s=$.value)==null?void 0:s.data}),Q=k(()=>{var s;return(s=g.value)==null?void 0:s.filter(e=>e.identity==="兒童")}),N=k(()=>{var s;return(s=g.value)==null?void 0:s.filter(e=>e.districtName==="一區")}),U=k(()=>{var s;return(s=g.value)==null?void 0:s.filter(e=>e.districtName==="二區")}),M=k(()=>{var s;return(s=g.value)==null?void 0:s.filter(e=>e.districtName==="三區")}),T=k(()=>{var s;return(s=g.value)==null?void 0:s.filter(e=>e.districtName==="四區")}),W=[{label:"報名名單",slot:"join"},{label:"搭乘遊覽車",slot:"departure"},{label:"自行前往",slot:"selfGo"}],X=async()=>{await J(),await H()},Y=["男介朋友","女介朋友","兒童"],C=s=>Y.includes(s),b=s=>s==="兒童"?"(兒童)":s==="男介朋友"||s==="女介朋友"?"(福音朋友)":"";return(s,e)=>{var D,E;const Z=te,p=re,h=le;return l(),f("div",se,[V(Z,{size:"sm",variant:"soft",loading:o(K)==="pending",disabled:!(((D=o(S))==null?void 0:D.user.role)===o(z).admin||((E=o(S))==null?void 0:E.user.role)===o(z).dev),onClick:X},{default:i(()=>e[0]||(e[0]=[d(" 更新數據 ")])),_:1},8,["loading","disabled"]),V(h,{items:W,variant:"link",class:"gap-4 w-full",ui:{trigger:"flex-1"}},{join:i(()=>{var y,w;return[r("div",null,"6/8 港湖集中主日 報名："+a((y=o(g))==null?void 0:y.length)+"位，其中兒童有"+a((w=o(Q))==null?void 0:w.length)+"位",1),e[1]||(e[1]=r("p",null,"一區",-1)),r("div",oe,[(l(!0),f(_,null,m(o(N),(n,c)=>(l(),v(p,{key:c,color:C(n.identity)?"success":"info",variant:"soft"},{default:i(()=>[d(a(n.name)+a(b(n.identity)),1)]),_:2},1032,["color"]))),128))]),e[2]||(e[2]=r("p",null,"二區",-1)),r("div",ae,[(l(!0),f(_,null,m(o(U),(n,c)=>(l(),v(p,{key:c,color:C(n.identity)?"success":"info",variant:"soft"},{default:i(()=>[d(a(n.name)+a(b(n.identity)),1)]),_:2},1032,["color"]))),128))]),e[3]||(e[3]=r("p",null,"三區",-1)),r("div",ie,[(l(!0),f(_,null,m(o(M),(n,c)=>(l(),v(p,{key:c,color:C(n.identity)?"success":"info",variant:"soft"},{default:i(()=>[d(a(n.name)+a(b(n.identity)),1)]),_:2},1032,["color"]))),128))]),e[4]||(e[4]=r("p",null,"四區",-1)),r("div",ue,[(l(!0),f(_,null,m(o(T),(n,c)=>(l(),v(p,{key:c,color:C(n.identity)?"success":"info",variant:"soft"},{default:i(()=>[d(a(n.name)+a(b(n.identity)),1)]),_:2},1032,["color"]))),128))])]}),departure:i(()=>{var y,w,n,c,F,G,A,I,q,j;return[r("div",null,[e[5]||(e[5]=r("p",null,"6/8 港湖集中主日 要搭遊覽車人位",-1)),r("p",fe," 搭乘去程遊覽車(東湖->信基)("+a((y=o(g))==null?void 0:y.filter(t=>t.departure==="搭乘去程").length)+"人) ",1),e[6]||(e[6]=r("p",null,"一區:",-1)),r("div",de,[(l(!0),f(_,null,m((w=o(N))==null?void 0:w.filter(t=>t.departure==="搭乘去程"),(t,u)=>(l(),v(p,{key:u,color:"info",variant:"soft"},{default:i(()=>[d(a(t.name),1)]),_:2},1024))),128))]),e[7]||(e[7]=r("p",null,"二區:",-1)),r("div",pe,[(l(!0),f(_,null,m((n=o(U))==null?void 0:n.filter(t=>t.departure==="搭乘去程"),(t,u)=>(l(),v(p,{key:u,color:"info",variant:"soft"},{default:i(()=>[d(a(t.name),1)]),_:2},1024))),128))]),e[8]||(e[8]=r("p",null,"三區:",-1)),r("div",ce,[(l(!0),f(_,null,m((c=o(M))==null?void 0:c.filter(t=>t.departure==="搭乘去程"),(t,u)=>(l(),v(p,{key:u,color:"info",variant:"soft"},{default:i(()=>[d(a(t.name),1)]),_:2},1024))),128))]),e[9]||(e[9]=r("p",null,"四區:",-1)),r("div",_e,[(l(!0),f(_,null,m((F=o(T))==null?void 0:F.filter(t=>t.departure==="搭乘去程"),(t,u)=>(l(),v(p,{key:u,color:"info",variant:"soft"},{default:i(()=>[d(a(t.name),1)]),_:2},1024))),128))])]),r("p",me," 搭乘回程遊覽車(信基->東湖)("+a((G=o(g))==null?void 0:G.filter(t=>t.returnRide==="搭乘回程").length)+"人) ",1),e[10]||(e[10]=r("p",null,"一區:",-1)),r("div",ve,[(l(!0),f(_,null,m((A=o(N))==null?void 0:A.filter(t=>t.returnRide==="搭乘回程"),(t,u)=>(l(),v(p,{key:u,color:"info",variant:"soft"},{default:i(()=>[d(a(t.name),1)]),_:2},1024))),128))]),e[11]||(e[11]=r("p",null,"二區:",-1)),r("div",ge,[(l(!0),f(_,null,m((I=o(U))==null?void 0:I.filter(t=>t.returnRide==="搭乘回程"),(t,u)=>(l(),v(p,{key:u,color:"info",variant:"soft"},{default:i(()=>[d(a(t.name),1)]),_:2},1024))),128))]),e[12]||(e[12]=r("p",null,"三區:",-1)),r("div",xe,[(l(!0),f(_,null,m((q=o(M))==null?void 0:q.filter(t=>t.returnRide==="搭乘回程"),(t,u)=>(l(),v(p,{key:u,color:"info",variant:"soft"},{default:i(()=>[d(a(t.name),1)]),_:2},1024))),128))]),e[13]||(e[13]=r("p",null,"四區:",-1)),r("div",ye,[(l(!0),f(_,null,m((j=o(T))==null?void 0:j.filter(t=>t.returnRide==="搭乘回程"),(t,u)=>(l(),v(p,{key:u,color:"info",variant:"soft"},{default:i(()=>[d(a(t.name),1)]),_:2},1024))),128))])]}),selfGo:i(()=>{var y,w;return[e[14]||(e[14]=r("p",null,"自行前往(早):",-1)),r("div",we,[(l(!0),f(_,null,m((y=o(g))==null?void 0:y.filter(n=>n.departure==="自行前往"),(n,c)=>(l(),v(p,{key:c,color:"info",variant:"soft"},{default:i(()=>[d(a(n.name),1)]),_:2},1024))),128))]),e[15]||(e[15]=r("p",null,"不搭回程(午):",-1)),r("div",ke,[(l(!0),f(_,null,m((w=o(g))==null?void 0:w.filter(n=>n.returnRide==="不搭回程"),(n,c)=>(l(),v(p,{key:c,color:"info",variant:"soft"},{default:i(()=>[d(a(n.name),1)]),_:2},1024))),128))])]}),_:1})])}}});export{Fe as default};
