var Se=Object.defineProperty;var Fe=(i,a,s)=>a in i?Se(i,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[a]=s;var H=(i,a,s)=>Fe(i,typeof a!="symbol"?a+"":a,s);import{e as ee,l as ke,n as M,o as h,w as W,j as z,p as te,k as u,P as re,X as ge,C as ze,Y as Ae,aj as Be,ak as Ee,al as Oe,D as O,E as N,r as q,m as ie,a as se,c as U,y as E,F as g,ad as me,ae as $e,am as Pe,G as ne,an as Ie,ao as xe,ap as G,aq as _e,b as je,d as Y,t as J,ar as Ve,as as fe,a7 as ve,a8 as Te,at as Z,au as Ce,av as De,ab as qe,aw as Ue,ax as Ge,Q as ae,a5 as he}from"./BW18UFj7.js";import{a as Me}from"./BsVcQ_p9.js";import{u as L}from"./Bz01IS9O.js";const Ne=ee({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{default:"label"}},setup(i){const a=i;return ke(),(s,e)=>(h(),M(u(re),te(a,{onMousedown:e[0]||(e[0]=o=>{!o.defaultPrevented&&o.detail>1&&o.preventDefault()})}),{default:W(()=>[z(s.$slots,"default")]),_:3},16))}}),Ke={slots:{root:"relative inline-flex items-center",base:["w-full rounded-[calc(var(--ui-radius)*1.5)] border-0 placeholder:text-(--ui-text-dimmed) focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"],leading:"absolute inset-y-0 start-0 flex items-center",leadingIcon:"shrink-0 text-(--ui-text-dimmed)",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailing:"absolute inset-y-0 end-0 flex items-center",trailingIcon:"shrink-0 text-(--ui-text-dimmed)"},variants:{buttonGroup:{horizontal:{root:"group",base:"group-not-only:group-first:rounded-e-none group-not-only:group-last:rounded-s-none group-not-last:group-not-first:rounded-none"},vertical:{root:"group",base:"group-not-only:group-first:rounded-b-none group-not-only:group-last:rounded-t-none group-not-last:group-not-first:rounded-none"}},size:{xs:{base:"px-2 py-1 text-xs gap-1",leading:"ps-2",trailing:"pe-2",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},sm:{base:"px-2.5 py-1.5 text-xs gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},md:{base:"px-2.5 py-1.5 text-sm gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},lg:{base:"px-3 py-2 text-sm gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"px-3 py-2 text-base gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-6",leadingAvatarSize:"xs",trailingIcon:"size-6"}},variant:{outline:"text-(--ui-text-highlighted) bg-(--ui-bg) ring ring-inset ring-(--ui-border-accented)",soft:"text-(--ui-text-highlighted) bg-(--ui-bg-elevated)/50 hover:bg-(--ui-bg-elevated) focus:bg-(--ui-bg-elevated) disabled:bg-(--ui-bg-elevated)/50",subtle:"text-(--ui-text-highlighted) bg-(--ui-bg-elevated) ring ring-inset ring-(--ui-border-accented)",ghost:"text-(--ui-text-highlighted) bg-transparent hover:bg-(--ui-bg-elevated) focus:bg-(--ui-bg-elevated) disabled:bg-transparent dark:disabled:bg-transparent",none:"text-(--ui-text-highlighted) bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},leading:{true:""},trailing:{true:""},loading:{true:""},highlight:{true:""},type:{file:"file:me-1.5 file:font-medium file:text-(--ui-text-muted) file:outline-none"}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-primary)"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-secondary)"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-success)"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-info)"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-warning)"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-error)"},{color:"primary",highlight:!0,class:"ring ring-inset ring-(--ui-primary)"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-(--ui-secondary)"},{color:"success",highlight:!0,class:"ring ring-inset ring-(--ui-success)"},{color:"info",highlight:!0,class:"ring ring-inset ring-(--ui-info)"},{color:"warning",highlight:!0,class:"ring ring-inset ring-(--ui-warning)"},{color:"error",highlight:!0,class:"ring ring-inset ring-(--ui-error)"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-border-inverted)"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-(--ui-border-inverted)"},{leading:!0,size:"xs",class:"ps-7"},{leading:!0,size:"sm",class:"ps-8"},{leading:!0,size:"md",class:"ps-9"},{leading:!0,size:"lg",class:"ps-10"},{leading:!0,size:"xl",class:"ps-11"},{trailing:!0,size:"xs",class:"pe-7"},{trailing:!0,size:"sm",class:"pe-8"},{trailing:!0,size:"md",class:"pe-9"},{trailing:!0,size:"lg",class:"pe-10"},{trailing:!0,size:"xl",class:"pe-11"},{loading:!0,leading:!0,class:{leadingIcon:"animate-spin"}},{loading:!0,leading:!1,trailing:!0,class:{trailingIcon:"animate-spin"}}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},Ye=["id","type","value","name","placeholder","disabled","required","autocomplete"],Je=ne;var be;const Le=N({extend:N(Ke),...((be=Je.ui)==null?void 0:be.input)||{}}),Re=ee({inheritAttrs:!1,__name:"Input",props:ge({as:{},id:{},name:{},type:{default:"text"},placeholder:{},color:{},variant:{},size:{},required:{type:Boolean},autocomplete:{default:"off"},autofocus:{type:Boolean},autofocusDelay:{default:0},disabled:{type:Boolean},highlight:{type:Boolean},class:{},ui:{},icon:{},avatar:{},leading:{type:Boolean},leadingIcon:{},trailing:{type:Boolean},trailingIcon:{},loading:{type:Boolean},loadingIcon:{}},{modelValue:{},modelModifiers:{}}),emits:ge(["update:modelValue","blur","change"],["update:modelValue"]),setup(i,{expose:a,emit:s}){const e=i,o=s,c=ze(),[m,p]=Ae(i,"modelValue"),{emitFormBlur:l,emitFormInput:d,emitFormChange:b,size:F,color:$,id:k,name:A,highlight:P,disabled:_,emitFormFocus:y,ariaAttrs:I}=Be(e,{}),{orientation:Q,size:X}=Ee(e),{isLeading:t,isTrailing:n,leadingIconName:f,trailingIconName:x}=Oe(e),w=O(()=>X.value||F.value),v=O(()=>Le({type:e.type,color:$.value,variant:e.variant,size:w==null?void 0:w.value,loading:e.loading,highlight:P.value,leading:t.value||!!e.avatar||!!c.leading,trailing:n.value||!!c.trailing,buttonGroup:Q.value})),S=q(null);function j(){var r;e.autofocus&&((r=S.value)==null||r.focus())}function B(r){p.trim&&(r=(r==null?void 0:r.trim())??null),(p.number||e.type==="number")&&(r=Pe(r)),p.nullify&&(r||(r=null)),m.value=r,d()}function V(r){p.lazy||B(r.target.value)}function T(r){const K=r.target.value;p.lazy&&B(K),p.trim&&(r.target.value=K.trim()),b(),o("change",r)}function C(r){l(),o("blur",r)}return a({inputRef:S}),ie(()=>{setTimeout(()=>{j()},e.autofocusDelay)}),(r,K)=>{var le;return h(),M(u(re),{as:r.as,class:g(v.value.root({class:[e.class,(le=e.ui)==null?void 0:le.root]}))},{default:W(()=>{var oe,ue,ce;return[se("input",te({id:u(k),ref_key:"inputRef",ref:S,type:r.type,value:u(m),name:u(A),placeholder:r.placeholder,class:v.value.base({class:(oe=e.ui)==null?void 0:oe.base}),disabled:u(_),required:r.required,autocomplete:r.autocomplete},{...r.$attrs,...u(I)},{onInput:V,onBlur:C,onChange:T,onFocus:K[0]||(K[0]=(...D)=>u(y)&&u(y)(...D))}),null,16,Ye),z(r.$slots,"default"),u(t)||r.avatar||c.leading?(h(),U("span",{key:0,class:g(v.value.leading({class:(ue=e.ui)==null?void 0:ue.leading}))},[z(r.$slots,"leading",{},()=>{var D,de,pe;return[u(t)&&u(f)?(h(),M(me,{key:0,name:u(f),class:g(v.value.leadingIcon({class:(D=e.ui)==null?void 0:D.leadingIcon}))},null,8,["name","class"])):r.avatar?(h(),M($e,te({key:1,size:((de=e.ui)==null?void 0:de.leadingAvatarSize)||v.value.leadingAvatarSize()},r.avatar,{class:v.value.leadingAvatar({class:(pe=e.ui)==null?void 0:pe.leadingAvatar})}),null,16,["size","class"])):E("",!0)]})],2)):E("",!0),u(n)||c.trailing?(h(),U("span",{key:1,class:g(v.value.trailing({class:(ce=e.ui)==null?void 0:ce.trailing}))},[z(r.$slots,"trailing",{},()=>{var D;return[u(x)?(h(),M(me,{key:0,name:u(x),class:g(v.value.trailingIcon({class:(D=e.ui)==null?void 0:D.trailingIcon}))},null,8,["name","class"])):E("",!0)]})],2)):E("",!0)]}),_:3},8,["as","class"])}}}),za=Object.assign(Re,{__name:"UInput"}),We={slots:{root:"",wrapper:"",labelWrapper:"flex content-center items-center justify-between",label:"block font-medium text-(--ui-text)",container:"mt-1 relative",description:"text-(--ui-text-muted)",error:"mt-2 text-(--ui-error)",hint:"text-(--ui-text-muted)",help:"mt-2 text-(--ui-text-muted)"},variants:{size:{xs:{root:"text-xs"},sm:{root:"text-xs"},md:{root:"text-sm"},lg:{root:"text-sm"},xl:{root:"text-base"}},required:{true:{label:"after:content-['*'] after:ms-0.5 after:text-(--ui-error)"}}},defaultVariants:{size:"md"}},Qe=["id"],Xe=["id"],He=["id"],Ze=ne;var ye;const ea=N({extend:N(We),...((ye=Ze.ui)==null?void 0:ye.formField)||{}}),aa=ee({__name:"FormField",props:{as:{},name:{},errorPattern:{},label:{},description:{},help:{},error:{type:[String,Boolean]},hint:{},size:{},required:{type:Boolean},eagerValidation:{type:Boolean},validateOnInputDelay:{},class:{},ui:{}},setup(i){const a=i,s=ze(),e=O(()=>ea({size:a.size,required:a.required})),o=Ie("form-errors",null),c=O(()=>{var l,d;return a.error||((d=(l=o==null?void 0:o.value)==null?void 0:l.find(b=>b.name&&(b.name===a.name||a.errorPattern&&b.name.match(a.errorPattern))))==null?void 0:d.message)}),m=q(xe()),p=m.value;return G(Ve,m),G(_e,O(()=>({error:c.value,name:a.name,size:a.size,eagerValidation:a.eagerValidation,validateOnInputDelay:a.validateOnInputDelay,errorPattern:a.errorPattern,hint:a.hint,description:a.description,ariaId:p}))),(l,d)=>{var b;return h(),M(u(re),{as:l.as,class:g(e.value.root({class:[a.class,(b=a.ui)==null?void 0:b.root]}))},{default:W(()=>{var F,$,k,A,P,_,y,I;return[se("div",{class:g(e.value.wrapper({class:(F=a.ui)==null?void 0:F.wrapper}))},[l.label||s.label?(h(),U("div",{key:0,class:g(e.value.labelWrapper({class:($=a.ui)==null?void 0:$.labelWrapper}))},[je(u(Ne),{for:m.value,class:g(e.value.label({class:(k=a.ui)==null?void 0:k.label}))},{default:W(()=>[z(l.$slots,"label",{label:l.label},()=>[Y(J(l.label),1)])]),_:3},8,["for","class"]),l.hint||s.hint?(h(),U("span",{key:0,id:`${u(p)}-hint`,class:g(e.value.hint({class:(A=a.ui)==null?void 0:A.hint}))},[z(l.$slots,"hint",{hint:l.hint},()=>[Y(J(l.hint),1)])],10,Qe)):E("",!0)],2)):E("",!0),l.description||s.description?(h(),U("p",{key:1,id:`${u(p)}-description`,class:g(e.value.description({class:(P=a.ui)==null?void 0:P.description}))},[z(l.$slots,"description",{description:l.description},()=>[Y(J(l.description),1)])],10,Xe)):E("",!0)],2),se("div",{class:g([(l.label||!!s.label||l.description||!!s.description)&&e.value.container({class:(_=a.ui)==null?void 0:_.container})])},[z(l.$slots,"default",{error:c.value}),typeof c.value=="string"&&c.value||s.error?(h(),U("p",{key:0,id:`${u(p)}-error`,class:g(e.value.error({class:(y=a.ui)==null?void 0:y.error}))},[z(l.$slots,"error",{error:c.value},()=>[Y(J(c.value),1)])],10,He)):l.help||s.help?(h(),U("p",{key:1,class:g(e.value.help({class:(I=a.ui)==null?void 0:I.help}))},[z(l.$slots,"help",{help:l.help},()=>[Y(J(l.help),1)])],2)):E("",!0)],2)]}),_:3},8,["as","class"])}}}),Ia=Object.assign(aa,{__name:"UFormField"});function ta(i){return i.validate&&i.__isYupSchema__}function ia(i){return i.inner!==void 0}function sa(i){return"schema"in i&&typeof i.coercer=="function"&&typeof i.validator=="function"&&typeof i.refiner=="function"}function ra(i){return i.validateAsync!==void 0&&i.id!==void 0}function na(i){return i.isJoi===!0}function la(i){return"~standard"in i}async function oa(i,a){var e;const s=await a["~standard"].validate(i);return s.issues?{errors:((e=s.issues)==null?void 0:e.map(o=>{var c;return{name:((c=o.path)==null?void 0:c.map(m=>typeof m=="object"?m.key:m).join("."))||"",message:o.message}}))||[],result:null}:{errors:null,result:s.value}}async function ua(i,a){try{return{errors:null,result:await a.validate(i,{abortEarly:!1})}}catch(s){if(ia(s))return{errors:s.inner.map(o=>({name:o.path??"",message:o.message})),result:null};throw s}}async function ca(i,a){const[s,e]=a.validate(i);return s?{errors:s.failures().map(c=>({message:c.message,name:c.path.join(".")})),result:null}:{errors:null,result:e}}async function da(i,a){try{return{errors:null,result:await a.validateAsync(i,{abortEarly:!1})}}catch(s){if(na(s))return{errors:s.details.map(o=>({name:o.path.join("."),message:o.message})),result:null};throw s}}function pa(i,a){if(la(a))return oa(i,a);if(ra(a))return da(i,a);if(ta(a))return ua(i,a);if(sa(a))return ca(i,a);throw new Error("Form validation failed: Unsupported form schema")}class R extends Error{constructor(s,e,o){super("Form validation exception");H(this,"formId");H(this,"errors");H(this,"children");this.formId=s,this.errors=e,this.children=o,Object.setPrototypeOf(this,R.prototype)}}const ga={base:""},ma=ne;var we;const fa=N({extend:N(ga),...((we=ma.ui)==null?void 0:we.form)||{}}),va=ee({__name:"Form",props:{id:{},schema:{},state:{},validate:{},validateOn:{default(){return["input","blur","change"]}},disabled:{type:Boolean},validateOnInputDelay:{default:300},transform:{type:Boolean,default:!0},class:{},onSubmit:{}},emits:["submit","error"],setup(i,{expose:a,emit:s}){const e=i,o=s,c=e.id??xe(),m=Me(`form-${c}`),p=Ie(fe,void 0);G(fe,m);const l=q(new Map);ie(async()=>{m.on(async t=>{var n;t.type==="attach"?l.value.set(t.formId,{validate:t.validate}):t.type==="detach"?l.value.delete(t.formId):(n=e.validateOn)!=null&&n.includes(t.type)&&!I.value&&(t.type!=="input"?await y({name:t.name,silent:!0,nested:!1}):(t.eager||k.has(t.name))&&await y({name:t.name,silent:!0,nested:!1})),t.type==="blur"&&k.add(t.name),(t.type==="change"||t.type==="input"||t.type==="blur"||t.type==="focus")&&$.add(t.name),(t.type==="change"||t.type==="input")&&F.add(t.name)})}),ve(()=>{m.reset()}),ie(async()=>{p&&(await Te(),p.emit({type:"attach",validate:y,formId:c}))}),ve(()=>{p&&p.emit({type:"detach",formId:c})});const d=q([]);G("form-errors",d);const b=q({});G(Ge,b);const F=new Set,$=new Set,k=new Set;function A(t){return t.map(n=>{var f;return{...n,id:n!=null&&n.name?(f=b.value[n.name])==null?void 0:f.id:void 0}})}const P=q(null);async function _(){let t=e.validate?await e.validate(e.state)??[]:[];if(e.schema){const{errors:n,result:f}=await pa(e.state,e.schema);n?t=t.concat(n):P.value=f}return A(t)}async function y(t={silent:!1,nested:!0,transform:!1}){const n=t.name&&!Array.isArray(t.name)?[t.name]:t.name,f=!n&&t.nested?Array.from(l.value.values()).map(({validate:w})=>w(t).then(()=>{}).catch(v=>{if(!(v instanceof R))throw v;return v})):[];if(n){const w=d.value.filter(S=>!n.some(j=>{var V,T,C;const B=(T=(V=b.value)==null?void 0:V[j])==null?void 0:T.pattern;return j===S.name||B&&((C=S.name)==null?void 0:C.match(B))})),v=(await _()).filter(S=>n.some(j=>{var V,T,C;const B=(T=(V=b.value)==null?void 0:V[j])==null?void 0:T.pattern;return j===S.name||B&&((C=S.name)==null?void 0:C.match(B))}));d.value=w.concat(v)}else d.value=await _();const x=(await Promise.all(f)).filter(w=>w!==void 0);if(d.value.length+x.length>0){if(t.silent)return!1;throw new R(c,d.value,x)}return t.transform&&Object.assign(e.state,P.value),e.state}const I=q(!1);G(Ce,Z(I));async function Q(t){var f;I.value=!0;const n=t;try{n.data=await y({nested:!0,transform:e.transform}),await((f=e.onSubmit)==null?void 0:f.call(e,n))}catch(x){if(!(x instanceof R))throw x;const w={...n,errors:x.errors,children:x.children};o("error",w)}finally{I.value=!1}}const X=O(()=>e.disabled||I.value);return G(De,O(()=>({disabled:X.value,validateOnInputDelay:e.validateOnInputDelay}))),a({validate:y,errors:d,setErrors(t,n){n?d.value=d.value.filter(f=>f.name!==n).concat(A(t)):d.value=A(t)},async submit(){await Q(new Event("submit"))},getErrors(t){return t?d.value.filter(n=>n.name===t):d.value},clear(t){t?d.value=d.value.filter(n=>n.name!==t):d.value=[]},disabled:X,dirty:O(()=>!!F.size),dirtyFields:Z(F),blurredFields:Z(k),touchedFields:Z($)}),(t,n)=>(h(),M(Ue(u(p)?"div":"form"),{id:u(c),class:g(u(fa)({class:e.class})),onSubmit:qe(Q,["prevent"])},{default:W(()=>[z(t.$slots,"default",{errors:d.value})]),_:3},40,["id","class"]))}}),xa=Object.assign(va,{__name:"UForm"}),Sa={login:async i=>await L(he.Login,{method:"POST",body:i,server:!1,lazy:!0,immediate:!1,watch:!1}),register:async i=>await L(he.UserRegister,{method:"POST",body:i,server:!1,lazy:!0,immediate:!1,watch:!1}),checkValidToken:async()=>await L(ae.CheckValidToken,{method:"GET",server:!1,lazy:!0,immediate:!1,watch:!1}),sendOTP:async()=>await L(ae.SendOTP,{method:"GET",server:!1,lazy:!0,immediate:!1,watch:!1}),bindOTPEmail:async i=>await L(ae.BindOTPEmail,{method:"POST",body:i,server:!1,lazy:!0,immediate:!1,watch:!1})};export{xa as _,Ia as a,za as b,Sa as u};
