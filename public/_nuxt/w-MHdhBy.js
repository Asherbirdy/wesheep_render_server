var ze=Object.defineProperty;var xe=(i,a,r)=>a in i?ze(i,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[a]=r;var Z=(i,a,r)=>xe(i,typeof a!="symbol"?a+"":a,r);import{e as X,K as we,j as K,o as h,w as R,z,m as ee,l as u,P as ie,a8 as T,af as re,Z as be,h as A,aM as ye,v as q,aN as Ie,aO as N,aP as Se,a as ae,ab as p,c as U,A as _,b as Fe,d as J,t as W,aQ as Be,Y as de,$ as $e,a5 as ke,a6 as _e,a7 as Ae,D as te,ac as ge,ad as je,aR as Ve,aS as pe,M as me,B as Ee,aT as H,aU as Oe,aV as Ce,J as Pe,R as De,aW as Me}from"./CwVfjjN4.js";import{a as qe}from"./9UEm5vML.js";const Ne=X({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{default:"label"}},setup(i){const a=i;return we(),(r,e)=>(h(),K(u(ie),ee(a,{onMousedown:e[0]||(e[0]=o=>{!o.defaultPrevented&&o.detail>1&&o.preventDefault()})}),{default:R(()=>[z(r.$slots,"default")]),_:3},16))}}),Ue={slots:{root:"",wrapper:"",labelWrapper:"flex content-center items-center justify-between",label:"block font-medium text-(--ui-text)",container:"mt-1 relative",description:"text-(--ui-text-muted)",error:"mt-2 text-(--ui-error)",hint:"text-(--ui-text-muted)",help:"mt-2 text-(--ui-text-muted)"},variants:{size:{xs:{root:"text-xs"},sm:{root:"text-xs"},md:{root:"text-sm"},lg:{root:"text-sm"},xl:{root:"text-base"}},required:{true:{label:"after:content-['*'] after:ms-0.5 after:text-(--ui-error)"}}},defaultVariants:{size:"md"}},Ke=["id"],Te=["id"],Ge=["id"],Je=re;var fe;const We=T({extend:T(Ue),...((fe=Je.ui)==null?void 0:fe.formField)||{}}),Ye=X({__name:"FormField",props:{as:{},name:{},errorPattern:{},label:{},description:{},help:{},error:{type:[String,Boolean]},hint:{},size:{},required:{type:Boolean},eagerValidation:{type:Boolean},validateOnInputDelay:{},class:{},ui:{}},setup(i){const a=i,r=be(),e=A(()=>We({size:a.size,required:a.required})),o=ye("form-errors",null),c=A(()=>{var l,d;return a.error||((d=(l=o==null?void 0:o.value)==null?void 0:l.find(b=>b.name&&(b.name===a.name||a.errorPattern&&b.name.match(a.errorPattern))))==null?void 0:d.message)}),m=q(Ie()),g=m.value;return N(Be,m),N(Se,A(()=>({error:c.value,name:a.name,size:a.size,eagerValidation:a.eagerValidation,validateOnInputDelay:a.validateOnInputDelay,errorPattern:a.errorPattern,hint:a.hint,description:a.description,ariaId:g}))),(l,d)=>{var b;return h(),K(u(ie),{as:l.as,class:p(e.value.root({class:[a.class,(b=a.ui)==null?void 0:b.root]}))},{default:R(()=>{var F,j,B,$,V,E,y,x;return[ae("div",{class:p(e.value.wrapper({class:(F=a.ui)==null?void 0:F.wrapper}))},[l.label||r.label?(h(),U("div",{key:0,class:p(e.value.labelWrapper({class:(j=a.ui)==null?void 0:j.labelWrapper}))},[Fe(u(Ne),{for:m.value,class:p(e.value.label({class:(B=a.ui)==null?void 0:B.label}))},{default:R(()=>[z(l.$slots,"label",{label:l.label},()=>[J(W(l.label),1)])]),_:3},8,["for","class"]),l.hint||r.hint?(h(),U("span",{key:0,id:`${u(g)}-hint`,class:p(e.value.hint({class:($=a.ui)==null?void 0:$.hint}))},[z(l.$slots,"hint",{hint:l.hint},()=>[J(W(l.hint),1)])],10,Ke)):_("",!0)],2)):_("",!0),l.description||r.description?(h(),U("p",{key:1,id:`${u(g)}-description`,class:p(e.value.description({class:(V=a.ui)==null?void 0:V.description}))},[z(l.$slots,"description",{description:l.description},()=>[J(W(l.description),1)])],10,Te)):_("",!0)],2),ae("div",{class:p([(l.label||!!r.label||l.description||!!r.description)&&e.value.container({class:(E=a.ui)==null?void 0:E.container})])},[z(l.$slots,"default",{error:c.value}),typeof c.value=="string"&&c.value||r.error?(h(),U("p",{key:0,id:`${u(g)}-error`,class:p(e.value.error({class:(y=a.ui)==null?void 0:y.error}))},[z(l.$slots,"error",{error:c.value},()=>[J(W(c.value),1)])],10,Ge)):l.help||r.help?(h(),U("p",{key:1,class:p(e.value.help({class:(x=a.ui)==null?void 0:x.help}))},[z(l.$slots,"help",{help:l.help},()=>[J(W(l.help),1)])],2)):_("",!0)],2)]}),_:3},8,["as","class"])}}}),ha=Object.assign(Ye,{__name:"UFormField"}),Re={slots:{root:"relative inline-flex items-center",base:["w-full rounded-[calc(var(--ui-radius)*1.5)] border-0 placeholder:text-(--ui-text-dimmed) focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"],leading:"absolute inset-y-0 start-0 flex items-center",leadingIcon:"shrink-0 text-(--ui-text-dimmed)",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailing:"absolute inset-y-0 end-0 flex items-center",trailingIcon:"shrink-0 text-(--ui-text-dimmed)"},variants:{buttonGroup:{horizontal:{root:"group",base:"group-not-only:group-first:rounded-e-none group-not-only:group-last:rounded-s-none group-not-last:group-not-first:rounded-none"},vertical:{root:"group",base:"group-not-only:group-first:rounded-b-none group-not-only:group-last:rounded-t-none group-not-last:group-not-first:rounded-none"}},size:{xs:{base:"px-2 py-1 text-xs gap-1",leading:"ps-2",trailing:"pe-2",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},sm:{base:"px-2.5 py-1.5 text-xs gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},md:{base:"px-2.5 py-1.5 text-sm gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},lg:{base:"px-3 py-2 text-sm gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"px-3 py-2 text-base gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-6",leadingAvatarSize:"xs",trailingIcon:"size-6"}},variant:{outline:"text-(--ui-text-highlighted) bg-(--ui-bg) ring ring-inset ring-(--ui-border-accented)",soft:"text-(--ui-text-highlighted) bg-(--ui-bg-elevated)/50 hover:bg-(--ui-bg-elevated) focus:bg-(--ui-bg-elevated) disabled:bg-(--ui-bg-elevated)/50",subtle:"text-(--ui-text-highlighted) bg-(--ui-bg-elevated) ring ring-inset ring-(--ui-border-accented)",ghost:"text-(--ui-text-highlighted) bg-transparent hover:bg-(--ui-bg-elevated) focus:bg-(--ui-bg-elevated) disabled:bg-transparent dark:disabled:bg-transparent",none:"text-(--ui-text-highlighted) bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},leading:{true:""},trailing:{true:""},loading:{true:""},highlight:{true:""},type:{file:"file:me-1.5 file:font-medium file:text-(--ui-text-muted) file:outline-none"}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-primary)"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-secondary)"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-success)"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-info)"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-warning)"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-error)"},{color:"primary",highlight:!0,class:"ring ring-inset ring-(--ui-primary)"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-(--ui-secondary)"},{color:"success",highlight:!0,class:"ring ring-inset ring-(--ui-success)"},{color:"info",highlight:!0,class:"ring ring-inset ring-(--ui-info)"},{color:"warning",highlight:!0,class:"ring ring-inset ring-(--ui-warning)"},{color:"error",highlight:!0,class:"ring ring-inset ring-(--ui-error)"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-border-inverted)"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-(--ui-border-inverted)"},{leading:!0,size:"xs",class:"ps-7"},{leading:!0,size:"sm",class:"ps-8"},{leading:!0,size:"md",class:"ps-9"},{leading:!0,size:"lg",class:"ps-10"},{leading:!0,size:"xl",class:"ps-11"},{trailing:!0,size:"xs",class:"pe-7"},{trailing:!0,size:"sm",class:"pe-8"},{trailing:!0,size:"md",class:"pe-9"},{trailing:!0,size:"lg",class:"pe-10"},{trailing:!0,size:"xl",class:"pe-11"},{loading:!0,leading:!0,class:{leadingIcon:"animate-spin"}},{loading:!0,leading:!1,trailing:!0,class:{trailingIcon:"animate-spin"}}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},Le=["id","type","value","name","placeholder","disabled","required","autocomplete"],Qe=re;var ve;const Ze=T({extend:T(Re),...((ve=Qe.ui)==null?void 0:ve.input)||{}}),He=X({inheritAttrs:!1,__name:"Input",props:de({as:{},id:{},name:{},type:{default:"text"},placeholder:{},color:{},variant:{},size:{},required:{type:Boolean},autocomplete:{default:"off"},autofocus:{type:Boolean},autofocusDelay:{default:0},disabled:{type:Boolean},highlight:{type:Boolean},class:{},ui:{},icon:{},avatar:{},leading:{type:Boolean},leadingIcon:{},trailing:{type:Boolean},trailingIcon:{},loading:{type:Boolean},loadingIcon:{}},{modelValue:{},modelModifiers:{}}),emits:de(["update:modelValue","blur","change"],["update:modelValue"]),setup(i,{expose:a,emit:r}){const e=i,o=r,c=be(),[m,g]=$e(i,"modelValue"),{emitFormBlur:l,emitFormInput:d,emitFormChange:b,size:F,color:j,id:B,name:$,highlight:V,disabled:E,emitFormFocus:y,ariaAttrs:x}=ke(e,{deferInputValidation:!0}),{orientation:L,size:Q}=_e(e),{isLeading:t,isTrailing:n,leadingIconName:f,trailingIconName:w}=Ae(e),I=A(()=>Q.value||F.value),v=A(()=>Ze({type:e.type,color:j.value,variant:e.variant,size:I==null?void 0:I.value,loading:e.loading,highlight:V.value,leading:t.value||!!e.avatar||!!c.leading,trailing:n.value||!!c.trailing,buttonGroup:L.value})),S=q(null);function O(){var s;e.autofocus&&((s=S.value)==null||s.focus())}function k(s){g.trim&&(s=(s==null?void 0:s.trim())??null),(g.number||e.type==="number")&&(s=Ve(s)),g.nullify&&(s||(s=null)),m.value=s,d()}function C(s){g.lazy||k(s.target.value)}function P(s){const G=s.target.value;g.lazy&&k(G),g.trim&&(s.target.value=G.trim()),b(),o("change",s)}function D(s){l(),o("blur",s)}return a({inputRef:S}),te(()=>{setTimeout(()=>{O()},e.autofocusDelay)}),(s,G)=>{var se;return h(),K(u(ie),{as:s.as,class:p(v.value.root({class:[e.class,(se=e.ui)==null?void 0:se.root]}))},{default:R(()=>{var ne,le,oe;return[ae("input",ee({id:u(B),ref_key:"inputRef",ref:S,type:s.type,value:u(m),name:u($),placeholder:s.placeholder,class:v.value.base({class:(ne=e.ui)==null?void 0:ne.base}),disabled:u(E),required:s.required,autocomplete:s.autocomplete},{...s.$attrs,...u(x)},{onInput:C,onBlur:D,onChange:P,onFocus:G[0]||(G[0]=(...M)=>u(y)&&u(y)(...M))}),null,16,Le),z(s.$slots,"default"),u(t)||s.avatar||c.leading?(h(),U("span",{key:0,class:p(v.value.leading({class:(le=e.ui)==null?void 0:le.leading}))},[z(s.$slots,"leading",{},()=>{var M,ue,ce;return[u(t)&&u(f)?(h(),K(ge,{key:0,name:u(f),class:p(v.value.leadingIcon({class:(M=e.ui)==null?void 0:M.leadingIcon}))},null,8,["name","class"])):s.avatar?(h(),K(je,ee({key:1,size:((ue=e.ui)==null?void 0:ue.leadingAvatarSize)||v.value.leadingAvatarSize()},s.avatar,{class:v.value.leadingAvatar({class:(ce=e.ui)==null?void 0:ce.leadingAvatar})}),null,16,["size","class"])):_("",!0)]})],2)):_("",!0),u(n)||c.trailing?(h(),U("span",{key:1,class:p(v.value.trailing({class:(oe=e.ui)==null?void 0:oe.trailing}))},[z(s.$slots,"trailing",{},()=>{var M;return[u(w)?(h(),K(ge,{key:0,name:u(w),class:p(v.value.trailingIcon({class:(M=e.ui)==null?void 0:M.trailingIcon}))},null,8,["name","class"])):_("",!0)]})],2)):_("",!0)]}),_:3},8,["as","class"])}}}),ba=Object.assign(He,{__name:"UInput"});function Xe(i){return i.validate&&i.__isYupSchema__}function ea(i){return i.inner!==void 0}function aa(i){return"schema"in i&&typeof i.coercer=="function"&&typeof i.validator=="function"&&typeof i.refiner=="function"}function ta(i){return i.validateAsync!==void 0&&i.id!==void 0}function ia(i){return i.isJoi===!0}function ra(i){return"~standard"in i}async function sa(i,a){var e;const r=await a["~standard"].validate(i);return r.issues?{errors:((e=r.issues)==null?void 0:e.map(o=>{var c;return{name:((c=o.path)==null?void 0:c.map(m=>typeof m=="object"?m.key:m).join("."))||"",message:o.message}}))||[],result:null}:{errors:null,result:r.value}}async function na(i,a){try{return{errors:null,result:await a.validate(i,{abortEarly:!1})}}catch(r){if(ea(r))return{errors:r.inner.map(o=>({name:o.path??"",message:o.message})),result:null};throw r}}async function la(i,a){const[r,e]=a.validate(i);return r?{errors:r.failures().map(c=>({message:c.message,name:c.path.join(".")})),result:null}:{errors:null,result:e}}async function oa(i,a){try{return{errors:null,result:await a.validateAsync(i,{abortEarly:!1})}}catch(r){if(ia(r))return{errors:r.details.map(o=>({name:o.path.join("."),message:o.message})),result:null};throw r}}function ua(i,a){if(ra(a))return sa(i,a);if(ta(a))return oa(i,a);if(Xe(a))return na(i,a);if(aa(a))return la(i,a);throw new Error("Form validation failed: Unsupported form schema")}class Y extends Error{constructor(r,e,o){super("Form validation exception");Z(this,"formId");Z(this,"errors");Z(this,"children");this.formId=r,this.errors=e,this.children=o,Object.setPrototypeOf(this,Y.prototype)}}const ca={base:""},da=re;var he;const ga=T({extend:T(ca),...((he=da.ui)==null?void 0:he.form)||{}}),pa=X({__name:"Form",props:{id:{},schema:{},state:{},validate:{},validateOn:{default(){return["input","blur","change"]}},disabled:{type:Boolean},validateOnInputDelay:{default:300},transform:{type:Boolean,default:!0},class:{},onSubmit:{}},emits:["submit","error"],setup(i,{expose:a,emit:r}){const e=i,o=r,c=e.id??Ie(),m=qe(`form-${c}`),g=ye(pe,void 0);N(pe,m);const l=q(new Map);te(async()=>{m.on(async t=>{var n;t.type==="attach"?l.value.set(t.formId,{validate:t.validate}):t.type==="detach"?l.value.delete(t.formId):(n=e.validateOn)!=null&&n.includes(t.type)&&!x.value&&(t.type!=="input"?await y({name:t.name,silent:!0,nested:!1}):(t.eager||B.has(t.name))&&await y({name:t.name,silent:!0,nested:!1})),t.type==="blur"&&B.add(t.name),(t.type==="change"||t.type==="input"||t.type==="blur"||t.type==="focus")&&j.add(t.name),(t.type==="change"||t.type==="input")&&F.add(t.name)})}),me(()=>{m.reset()}),te(async()=>{g&&(await Ee(),g.emit({type:"attach",validate:y,formId:c}))}),me(()=>{g&&g.emit({type:"detach",formId:c})});const d=q([]);N("form-errors",d);const b=q({});N(Me,b);const F=new Set,j=new Set,B=new Set;function $(t){return t.map(n=>{var f;return{...n,id:n!=null&&n.name?(f=b.value[n.name])==null?void 0:f.id:void 0}})}const V=q(null);async function E(){let t=e.validate?await e.validate(e.state)??[]:[];if(e.schema){const{errors:n,result:f}=await ua(e.state,e.schema);n?t=t.concat(n):V.value=f}return $(t)}async function y(t={silent:!1,nested:!0,transform:!1}){const n=t.name&&!Array.isArray(t.name)?[t.name]:t.name,f=!n&&t.nested?Array.from(l.value.values()).map(({validate:I})=>I(t).then(()=>{}).catch(v=>{if(!(v instanceof Y))throw v;return v})):[];if(n){const I=d.value.filter(S=>!n.some(O=>{var C,P,D;const k=(P=(C=b.value)==null?void 0:C[O])==null?void 0:P.pattern;return O===S.name||k&&((D=S.name)==null?void 0:D.match(k))})),v=(await E()).filter(S=>n.some(O=>{var C,P,D;const k=(P=(C=b.value)==null?void 0:C[O])==null?void 0:P.pattern;return O===S.name||k&&((D=S.name)==null?void 0:D.match(k))}));d.value=I.concat(v)}else d.value=await E();const w=(await Promise.all(f)).filter(I=>I!==void 0);if(d.value.length+w.length>0){if(t.silent)return!1;throw new Y(c,d.value,w)}return t.transform&&Object.assign(e.state,V.value),e.state}const x=q(!1);N(Oe,H(x));async function L(t){var f;x.value=!0;const n=t;try{n.data=await y({nested:!0,transform:e.transform}),await((f=e.onSubmit)==null?void 0:f.call(e,n))}catch(w){if(!(w instanceof Y))throw w;const I={...n,errors:w.errors,children:w.children};o("error",I)}finally{x.value=!1}}const Q=A(()=>e.disabled||x.value);return N(Ce,A(()=>({disabled:Q.value,validateOnInputDelay:e.validateOnInputDelay}))),a({validate:y,errors:d,setErrors(t,n){n?d.value=d.value.filter(f=>f.name!==n).concat($(t)):d.value=$(t)},async submit(){await L(new Event("submit"))},getErrors(t){return t?d.value.filter(n=>n.name===t):d.value},clear(t){t?d.value=d.value.filter(n=>n.name!==t):d.value=[]},disabled:Q,dirty:A(()=>!!F.size),dirtyFields:H(F),blurredFields:H(B),touchedFields:H(j)}),(t,n)=>(h(),K(De(u(g)?"div":"form"),{id:u(c),class:p(u(ga)({class:e.class})),onSubmit:Pe(L,["prevent"])},{default:R(()=>[z(t.$slots,"default",{errors:d.value})]),_:3},40,["id","class"]))}}),ya=Object.assign(pa,{__name:"UForm"});export{ba as _,ya as a,ha as b};
