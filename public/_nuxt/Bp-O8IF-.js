import{ai as b,e as M,ag as C,h as m,c as f,a as s,b as A,w as u,l as a,ah as O,o as n,d as g,t as o,F as h,r as v,j as w}from"./Bwl4UcAB.js";import{U as $}from"./BYoB8N9j.js";import{_ as H}from"./VtACcADc.js";import{u as J}from"./teYQA1dA.js";import{R as j}from"./yGGtjXql.js";import{u as q}from"./Bbkn8Tn2.js";import"./Cwlhdts7.js";import"./bqPjc4_t.js";import"./Tl0vG3W9.js";import"./C29T0yL-.js";const N={get:async()=>await q(b.BlendingGetAll,{method:"GET",server:!1,lazy:!0}),createFromSheet:async()=>await q(b.BlendingCreateFromSheet,{method:"GET",server:!1,lazy:!0,immediate:!1,watch:!1})},K={class:"flex justify-between items-center"},P={class:"mb-4"},Q={class:"flex flex-wrap gap-2"},W={class:"flex flex-wrap gap-2"},X={class:"flex flex-wrap gap-2"},Y={class:"flex flex-wrap gap-2"},ue=M({__name:"blending",async setup(Z){let r,x;const{data:T,execute:z}=([r,x]=C(()=>N.get()),r=await r,x(),r),{execute:E,status:G}=([r,x]=C(()=>N.createFromSheet()),r=await r,x(),r),V=async()=>{await E(),await z()},{data:B}=J(b.UserShowMe),p=m(()=>{var t;return(t=T.value)==null?void 0:t.response.filter(e=>e.name!=="")}),R=m(()=>{var t;return(t=p.value)==null?void 0:t.filter(e=>e.identity==="女介朋友"||e.identity==="男介朋友")}),c=t=>{var e;return((e=p.value)==null?void 0:e.filter(_=>_.ageRange===t).map(_=>_))||[]},k=m(()=>{var t;return((t=p.value)==null?void 0:t.filter(e=>e.selectSchedule==="週六_單日行程").map(e=>e))||[]}),U=m(()=>{var t;return((t=p.value)==null?void 0:t.filter(e=>e.selectSchedule==="只前往主日").map(e=>e))||[]}),D=m(()=>[{title:"年長報名",data:c("年長")},{title:"壯年報名",data:c("壯年")},{title:"青職報名",data:c("青職")},{title:"大學報名",data:c("大學")},{title:"青少年報名",data:c("青少年")},{title:"兒童報名",data:c("兒童")},{title:"六歲以下報名",data:c("六歲以下")}]),L=[{label:"報名名單",slot:"join"},{label:"福音朋友",slot:"gospel"},{label:"單日報名",slot:"oneDay"}];return(t,e)=>{var F,S;const _=O,y=$,I=H;return n(),f("div",null,[s("div",K,[e[1]||(e[1]=s("h1",null,"2025年 全會所戶外相調",-1)),A(_,{color:"info",variant:"soft",size:"sm",loading:a(G)==="pending",disabled:!(((F=a(B))==null?void 0:F.user.role)===a(j).admin||((S=a(B))==null?void 0:S.user.role)===a(j).dev),onClick:V},{default:u(()=>e[0]||(e[0]=[g(" 更新 ")])),_:1},8,["loading","disabled"])]),A(I,{items:L,variant:"link",class:"gap-4 w-full",ui:{trigger:"flex-1"}},{join:u(()=>{var i;return[s("p",P," 報名人數"+o((i=a(p))==null?void 0:i.length),1),(n(!0),f(h,null,v(a(D),l=>(n(),f("div",{key:l.title,class:"mb-4"},[s("p",null,o(l.title)+" ("+o(l.data.length)+"位):",1),s("div",Q,[(n(!0),f(h,null,v(l.data,d=>(n(),w(y,{key:d._id,color:"info",variant:"soft"},{default:u(()=>[g(o(d.name),1)]),_:2},1024))),128))])]))),128))]}),gospel:u(()=>{var i;return[s("p",null,"福音朋友"+o((i=a(R))==null?void 0:i.length)+"位",1),s("div",W,[(n(!0),f(h,null,v(a(R),l=>(n(),w(y,{key:l._id,color:"info",variant:"soft"},{default:u(()=>[g(o(l.name)+" ("+o(l.ageRange)+") ",1)]),_:2},1024))),128))])]}),oneDay:u(()=>{var i,l;return[s("p",null,"週六單日報名"+o((i=a(k))==null?void 0:i.length)+"位",1),s("div",X,[(n(!0),f(h,null,v(a(k),d=>(n(),w(y,{key:d._id,color:"info",variant:"soft"},{default:u(()=>[g(o(d.name),1)]),_:2},1024))),128))]),s("p",null,"只前往主日"+o((l=a(U))==null?void 0:l.length)+"位",1),s("div",Y,[(n(!0),f(h,null,v(a(U),d=>(n(),w(y,{key:d._id,color:"info",variant:"soft"},{default:u(()=>[g(o(d.name),1)]),_:2},1024))),128))])]}),_:1})])}}});export{ue as default};
