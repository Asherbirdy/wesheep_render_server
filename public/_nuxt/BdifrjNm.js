import{bg as x,r as d,D as y,q as w,e as O,g as P,i as B,h as D,ab as U,n as N,o as L,w as I,b as M,k as c,P as G,j as V}from"./DISH5zJp.js";function k(e){const o=x({dir:d("ltr")});return y(()=>{var n;return(e==null?void 0:e.value)||((n=o.dir)==null?void 0:n.value)||"ltr"})}const j="rovingFocusGroup.onEntryFocus",K={bubbles:!1,cancelable:!0},Y={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $(e,o){return o!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function J(e,o,n){const t=$(e.key,n);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(t))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(t)))return Y[t]}function q(e,o=!1){const n=w();for(const t of e)if(t===n||(t.focus({preventScroll:o}),w()!==n))return}function Q(e,o){return e.map((n,t)=>e[(o+t)%e.length])}const[W,z]=P("RovingFocusGroup"),X=O({__name:"RovingFocusGroup",props:{orientation:{default:void 0},dir:{},loop:{type:Boolean,default:!1},currentTabStopId:{},defaultCurrentTabStopId:{},preventScrollOnEntryFocus:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["entryFocus","update:currentTabStopId"],setup(e,{expose:o,emit:n}){const t=e,m=n,{loop:T,orientation:g,dir:C}=B(t),b=k(C),f=D(t,"currentTabStopId",m,{defaultValue:t.defaultCurrentTabStopId,passive:t.currentTabStopId===void 0}),i=d(!1),l=d(!1),p=d(0),{getItems:F,CollectionSlot:A}=U({isProvider:!0});function E(r){const a=!l.value;if(r.currentTarget&&r.target===r.currentTarget&&a&&!i.value){const u=new CustomEvent(j,K);if(r.currentTarget.dispatchEvent(u),m("entryFocus",u),!u.defaultPrevented){const v=F().map(s=>s.ref).filter(s=>s.dataset.disabled!==""),h=v.find(s=>s.getAttribute("data-active")==="true"),R=v.find(s=>s.id===f.value),_=[h,R,...v].filter(Boolean);q(_,t.preventScrollOnEntryFocus)}}l.value=!1}function S(){setTimeout(()=>{l.value=!1},1)}return o({getItems:F}),z({loop:T,dir:b,orientation:g,currentTabStopId:f,onItemFocus:r=>{f.value=r},onItemShiftTab:()=>{i.value=!0},onFocusableItemAdd:()=>{p.value++},onFocusableItemRemove:()=>{p.value--}}),(r,a)=>(L(),N(c(A),null,{default:I(()=>[M(c(G),{tabindex:i.value||p.value===0?-1:0,"data-orientation":c(g),as:r.as,"as-child":r.asChild,dir:c(b),style:{outline:"none"},onMousedown:a[0]||(a[0]=u=>l.value=!0),onMouseup:S,onFocus:E,onBlur:a[1]||(a[1]=u=>i.value=!1)},{default:I(()=>[V(r.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}});export{X as _,q as f,J as g,W as i,k as u,Q as w};
