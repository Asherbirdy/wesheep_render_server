import{e as V,D as k,a6 as de,m as D,a7 as ce,n as y,o as g,w as d,b as m,k as t,P as T,j as _,a8 as Z,g as fe,i as ee,l as R,h as me,r as z,a9 as ve,y as C,x as pe,aa as ge,ab as be,S as ye,ac as we,p as O,C as he,J as _e,K as Ve,c as L,F as I,$ as j,a0 as J,E as W,G as ke,ad as xe,ae as Ie,af as G,d as Y,t as Q,Y as ae,a1 as Te,R as N,a3 as q,ag as E,O as Ce,ah as P,ai as M}from"./BW18UFj7.js";import{i as ze,g as Re,w as $e,f as Se,u as Ae,_ as Fe}from"./DpYPkYV2.js";import{u as te}from"./BsVcQ_p9.js";import{_ as se,b as ie,a as oe,u as H}from"./D4STHdpQ.js";import"./Bz01IS9O.js";const Pe=V({__name:"RovingFocusItem",props:{tabStopId:{},focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!0},allowShiftKey:{type:Boolean},asChild:{type:Boolean},as:{default:"span"}},setup(v){const s=v,a=ze(),i=te(),e=k(()=>s.tabStopId||i),u=k(()=>a.currentTabStopId.value===e.value),{getItems:o,CollectionItem:l}=de();D(()=>{s.focusable&&a.onFocusableItemAdd()}),ce(()=>{s.focusable&&a.onFocusableItemRemove()});function n(r){if(r.key==="Tab"&&r.shiftKey){a.onItemShiftTab();return}if(r.target!==r.currentTarget)return;const c=Re(r,a.orientation.value,a.dir.value);if(c!==void 0){if(r.metaKey||r.ctrlKey||r.altKey||!s.allowShiftKey&&r.shiftKey)return;r.preventDefault();let p=[...o().map(f=>f.ref).filter(f=>f.dataset.disabled!=="")];if(c==="last")p.reverse();else if(c==="prev"||c==="next"){c==="prev"&&p.reverse();const f=p.indexOf(r.currentTarget);p=a.loop.value?$e(p,f+1):p.slice(f+1)}Z(()=>Se(p))}}return(r,c)=>(g(),y(t(l),null,{default:d(()=>[m(t(T),{tabindex:u.value?0:-1,"data-orientation":t(a).orientation.value,"data-active":r.active,"data-disabled":r.focusable?void 0:"",as:r.as,"as-child":r.asChild,onMousedown:c[0]||(c[0]=p=>{r.focusable?t(a).onItemFocus(e.value):p.preventDefault()}),onFocus:c[1]||(c[1]=p=>t(a).onItemFocus(e.value)),onKeydown:n},{default:d(()=>[_(r.$slots,"default")]),_:3},8,["tabindex","data-orientation","data-active","data-disabled","as","as-child"])]),_:3}))}}),[U,Me]=fe("TabsRoot"),Ue=V({__name:"TabsRoot",props:{defaultValue:{},orientation:{default:"horizontal"},dir:{},activationMode:{default:"automatic"},modelValue:{},unmountOnHide:{type:Boolean,default:!0},asChild:{type:Boolean},as:{}},emits:["update:modelValue"],setup(v,{emit:s}){const a=v,i=s,{orientation:e,unmountOnHide:u,dir:o}=ee(a),l=Ae(o);R();const n=me(a,"modelValue",i,{defaultValue:a.defaultValue,passive:a.modelValue===void 0}),r=z();return Me({modelValue:n,changeModelValue:c=>{n.value=c},orientation:e,dir:l,unmountOnHide:u,activationMode:a.activationMode,baseId:te(void 0,"reka-tabs"),tabsList:r}),(c,p)=>(g(),y(t(T),{dir:t(l),"data-orientation":t(e),"as-child":c.asChild,as:c.as},{default:d(()=>[_(c.$slots,"default",{modelValue:t(n)})]),_:3},8,["dir","data-orientation","as-child","as"]))}}),Be=V({__name:"TabsList",props:{loop:{type:Boolean,default:!0},asChild:{type:Boolean},as:{}},setup(v){const s=v,{loop:a}=ee(s),{forwardRef:i,currentElement:e}=R(),u=U();return u.tabsList=e,(o,l)=>(g(),y(t(Fe),{"as-child":"",orientation:t(u).orientation.value,dir:t(u).dir.value,loop:t(a)},{default:d(()=>[m(t(T),{ref:t(i),role:"tablist","as-child":o.asChild,as:o.as,"aria-orientation":t(u).orientation.value},{default:d(()=>[_(o.$slots,"default")]),_:3},8,["as-child","as","aria-orientation"])]),_:3},8,["orientation","dir","loop"]))}});function le(v,s){return`${v}-trigger-${s}`}function ne(v,s){return`${v}-content-${s}`}const Ke=V({__name:"TabsContent",props:{value:{},forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(v){const s=v,{forwardRef:a}=R(),i=U(),e=k(()=>le(i.baseId,s.value)),u=k(()=>ne(i.baseId,s.value)),o=k(()=>s.value===i.modelValue.value),l=z(o.value);return D(()=>{requestAnimationFrame(()=>{l.value=!1})}),(n,r)=>(g(),y(t(pe),{present:n.forceMount||o.value,"force-mount":""},{default:d(({present:c})=>[m(t(T),{id:u.value,ref:t(a),"as-child":n.asChild,as:n.as,role:"tabpanel","data-state":o.value?"active":"inactive","data-orientation":t(i).orientation.value,"aria-labelledby":e.value,hidden:!c,tabindex:"0",style:ve({animationDuration:l.value?"0s":void 0})},{default:d(()=>[!t(i).unmountOnHide.value||c?_(n.$slots,"default",{key:0}):C("",!0)]),_:2},1032,["id","as-child","as","data-state","data-orientation","aria-labelledby","hidden","style"])]),_:3},8,["present"]))}}),Le=V({__name:"TabsTrigger",props:{value:{},disabled:{type:Boolean,default:!1},asChild:{type:Boolean},as:{default:"button"}},setup(v){const s=v,{forwardRef:a}=R(),i=U(),e=k(()=>le(i.baseId,s.value)),u=k(()=>ne(i.baseId,s.value)),o=k(()=>s.value===i.modelValue.value);return(l,n)=>(g(),y(t(Pe),{"as-child":"",focusable:!l.disabled,active:o.value},{default:d(()=>[m(t(T),{id:e.value,ref:t(a),role:"tab",type:l.as==="button"?"button":void 0,as:l.as,"as-child":l.asChild,"aria-selected":o.value?"true":"false","aria-controls":u.value,"data-state":o.value?"active":"inactive",disabled:l.disabled,"data-disabled":l.disabled?"":void 0,"data-orientation":t(i).orientation.value,onMousedown:n[0]||(n[0]=be(r=>{!l.disabled&&r.ctrlKey===!1?t(i).changeModelValue(l.value):r.preventDefault()},["left"])),onKeydown:n[1]||(n[1]=ge(r=>t(i).changeModelValue(l.value),["enter","space"])),onFocus:n[2]||(n[2]=()=>{const r=t(i).activationMode!=="manual";!o.value&&!l.disabled&&r&&t(i).changeModelValue(l.value)})},{default:d(()=>[_(l.$slots,"default")]),_:3},8,["id","type","as","as-child","aria-selected","aria-controls","data-state","disabled","data-disabled","data-orientation"])]),_:3},8,["focusable","active"]))}}),Ne=V({__name:"TabsIndicator",props:{asChild:{type:Boolean},as:{}},setup(v){const s=v,a=U();R();const i=z(),e=z({size:null,position:null});ye(()=>[a.modelValue.value,a==null?void 0:a.dir.value],async()=>{await Z(),u()},{immediate:!0}),we([a.tabsList,i],u);function u(){var o;i.value=(o=a.tabsList.value)==null?void 0:o.querySelector('[role="tab"][data-state="active"]'),i.value&&(a.orientation.value==="horizontal"?e.value={size:i.value.offsetWidth,position:i.value.offsetLeft}:e.value={size:i.value.offsetHeight,position:i.value.offsetTop})}return(o,l)=>typeof e.value.size=="number"?(g(),y(t(T),O({key:0},s,{style:{"--reka-tabs-indicator-size":`${e.value.size}px`,"--reka-tabs-indicator-position":`${e.value.position}px`}}),{default:d(()=>[_(o.$slots,"default")]),_:3},16,["style"])):C("",!0)}}),qe={slots:{root:"flex items-center gap-2",list:"relative flex p-1 group",indicator:"absolute transition-[translate,width] duration-200",trigger:["group relative inline-flex items-center shrink-0 min-w-0 data-[state=inactive]:text-(--ui-text-muted) hover:data-[state=inactive]:not-disabled:text-(--ui-text) font-medium rounded-[calc(var(--ui-radius)*1.5)] disabled:cursor-not-allowed disabled:opacity-75 focus:outline-hidden","transition-colors"],content:"focus:outline-none w-full",leadingIcon:"shrink-0",leadingAvatar:"shrink-0",leadingAvatarSize:"",label:"truncate"},variants:{color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},variant:{pill:{list:"bg-(--ui-bg-elevated) rounded-[calc(var(--ui-radius)*2)]",trigger:"flex-1 w-full",indicator:"rounded-[calc(var(--ui-radius)*1.5)] shadow-xs"},link:{list:"border-(--ui-border)",indicator:"rounded-full"}},orientation:{horizontal:{root:"flex-col",list:"w-full",indicator:"left-0 w-(--reka-tabs-indicator-size) translate-x-(--reka-tabs-indicator-position)",trigger:"justify-center"},vertical:{list:"flex-col",indicator:"top-0 h-(--reka-tabs-indicator-size) translate-y-(--reka-tabs-indicator-position)"}},size:{xs:{trigger:"px-2 py-1 text-xs gap-1",leadingIcon:"size-4",leadingAvatarSize:"3xs"},sm:{trigger:"px-2.5 py-1.5 text-xs gap-1.5",leadingIcon:"size-4",leadingAvatarSize:"3xs"},md:{trigger:"px-3 py-1.5 text-sm gap-1.5",leadingIcon:"size-5",leadingAvatarSize:"2xs"},lg:{trigger:"px-3 py-2 text-sm gap-2",leadingIcon:"size-5",leadingAvatarSize:"2xs"},xl:{trigger:"px-3 py-2 text-base gap-2",leadingIcon:"size-6",leadingAvatarSize:"xs"}}},compoundVariants:[{orientation:"horizontal",variant:"pill",class:{indicator:"inset-y-1"}},{orientation:"horizontal",variant:"link",class:{list:"border-b -mb-px",indicator:"-bottom-px h-px"}},{orientation:"vertical",variant:"pill",class:{indicator:"inset-x-1",list:"items-center"}},{orientation:"vertical",variant:"link",class:{list:"border-s -ms-px",indicator:"-start-px w-px"}},{color:"primary",variant:"pill",class:{indicator:"bg-(--ui-primary)",trigger:"data-[state=active]:text-(--ui-bg) focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-(--ui-primary)"}},{color:"secondary",variant:"pill",class:{indicator:"bg-(--ui-secondary)",trigger:"data-[state=active]:text-(--ui-bg) focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-(--ui-secondary)"}},{color:"success",variant:"pill",class:{indicator:"bg-(--ui-success)",trigger:"data-[state=active]:text-(--ui-bg) focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-(--ui-success)"}},{color:"info",variant:"pill",class:{indicator:"bg-(--ui-info)",trigger:"data-[state=active]:text-(--ui-bg) focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-(--ui-info)"}},{color:"warning",variant:"pill",class:{indicator:"bg-(--ui-warning)",trigger:"data-[state=active]:text-(--ui-bg) focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-(--ui-warning)"}},{color:"error",variant:"pill",class:{indicator:"bg-(--ui-error)",trigger:"data-[state=active]:text-(--ui-bg) focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-(--ui-error)"}},{color:"neutral",variant:"pill",class:{indicator:"bg-(--ui-bg-inverted)",trigger:"data-[state=active]:text-(--ui-bg) focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-(--ui-border-inverted)"}},{color:"primary",variant:"link",class:{indicator:"bg-(--ui-primary)",trigger:"data-[state=active]:text-(--ui-primary) focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-primary)"}},{color:"secondary",variant:"link",class:{indicator:"bg-(--ui-secondary)",trigger:"data-[state=active]:text-(--ui-secondary) focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-secondary)"}},{color:"success",variant:"link",class:{indicator:"bg-(--ui-success)",trigger:"data-[state=active]:text-(--ui-success) focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-success)"}},{color:"info",variant:"link",class:{indicator:"bg-(--ui-info)",trigger:"data-[state=active]:text-(--ui-info) focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-info)"}},{color:"warning",variant:"link",class:{indicator:"bg-(--ui-warning)",trigger:"data-[state=active]:text-(--ui-warning) focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-warning)"}},{color:"error",variant:"link",class:{indicator:"bg-(--ui-error)",trigger:"data-[state=active]:text-(--ui-error) focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-error)"}},{color:"neutral",variant:"link",class:{indicator:"bg-(--ui-bg-inverted)",trigger:"data-[state=active]:text-(--ui-text-highlighted) focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-border-inverted)"}}],defaultVariants:{color:"primary",variant:"pill",size:"md"}},Ee=ke;var X;const He=W({extend:W(qe),...((X=Ee.ui)==null?void 0:X.tabs)||{}}),Oe=V({__name:"Tabs",props:{as:{},items:{},color:{},variant:{},size:{},orientation:{default:"horizontal"},content:{type:Boolean,default:!0},labelKey:{default:"label"},class:{},ui:{},defaultValue:{default:"0"},modelValue:{},activationMode:{},unmountOnHide:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(v,{emit:s}){const a=v,i=s,e=he(),u=_e(Ve(a,"as","modelValue","defaultValue","orientation","activationMode","unmountOnHide"),i),o=k(()=>He({color:a.color,variant:a.variant,size:a.size,orientation:a.orientation}));return(l,n)=>{var r;return g(),y(t(Ue),O(t(u),{class:o.value.root({class:[a.class,(r=a.ui)==null?void 0:r.root]})}),{default:d(()=>{var c;return[m(t(Be),{class:I(o.value.list({class:(c=a.ui)==null?void 0:c.list}))},{default:d(()=>{var p;return[m(t(Ne),{class:I(o.value.indicator({class:(p=a.ui)==null?void 0:p.indicator}))},null,8,["class"]),(g(!0),L(J,null,j(l.items,(f,w)=>{var $;return g(),y(t(Le),{key:w,value:f.value||String(w),disabled:f.disabled,class:I(o.value.trigger({class:($=a.ui)==null?void 0:$.trigger}))},{default:d(()=>{var S;return[_(l.$slots,"leading",{item:f,index:w},()=>{var A,F,B;return[f.icon?(g(),y(xe,{key:0,name:f.icon,class:I(o.value.leadingIcon({class:(A=a.ui)==null?void 0:A.leadingIcon}))},null,8,["name","class"])):f.avatar?(g(),y(Ie,O({key:1,size:((F=a.ui)==null?void 0:F.leadingAvatarSize)||o.value.leadingAvatarSize(),ref_for:!0},f.avatar,{class:o.value.leadingAvatar({class:(B=a.ui)==null?void 0:B.leadingAvatar})}),null,16,["size","class"])):C("",!0)]}),t(G)(f,a.labelKey)||e.default?(g(),L("span",{key:0,class:I(o.value.label({class:(S=a.ui)==null?void 0:S.label}))},[_(l.$slots,"default",{item:f,index:w},()=>[Y(Q(t(G)(f,a.labelKey)),1)])],2)):C("",!0),_(l.$slots,"trailing",{item:f,index:w})]}),_:2},1032,["value","disabled","class"])}),128))]}),_:3},8,["class"]),l.content?(g(!0),L(J,{key:0},j(l.items,(p,f)=>{var w;return g(),y(t(Ke),{key:f,value:p.value||String(f),class:I(o.value.content({class:(w=a.ui)==null?void 0:w.content}))},{default:d(()=>[_(l.$slots,p.slot||"content",{item:p,index:f},()=>[Y(Q(p.content),1)])]),_:2},1032,["value","class"])}),128)):C("",!0)]}),_:3},16,["class"])}}}),De=Object.assign(Oe,{__name:"UTabs"}),re={email:/^[^\s@]+@[^\s@][^\s.@]*\.[^\s@]+$/},je=V({__name:"LoginFormComponent",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(v){const s=ae(v,"modelValue"),a=i=>{const e=[];return i.email||e.push({name:"email",message:"Required"}),re.email.test(String(i.email))||e.push({name:"email",message:"Invalid email format"}),i.password||e.push({name:"password",message:"Required"}),e};return(i,e)=>{const u=ie,o=oe,l=se;return g(),y(l,{state:s.value,validate:a,class:"flex flex-col gap-4"},{default:d(()=>[m(o,{label:"Email",name:"email"},{default:d(()=>[m(u,{modelValue:s.value.email,"onUpdate:modelValue":e[0]||(e[0]=n=>s.value.email=n),class:"w-full"},null,8,["modelValue"])]),_:1}),m(o,{label:"Password",name:"password"},{default:d(()=>[m(u,{modelValue:s.value.password,"onUpdate:modelValue":e[1]||(e[1]=n=>s.value.password=n),type:"password",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1},8,["state"])}}}),Je=V({__name:"RegisterFormComponent",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(v){const s=ae(v,"modelValue"),a=i=>{var u;const e=[];return i.name||e.push({name:"name",message:"Required"}),re.email.test(String(i.email))||e.push({name:"email",message:"Invalid email format"}),i.password||e.push({name:"password",message:"Required"}),(u=i==null?void 0:i.password)!=null&&u.length&&i.password.length<8&&e.push({name:"password",message:"密碼長度至少8個字"}),i.confirmPassword||e.push({name:"confirmPassword",message:"Required"}),i.password!==i.confirmPassword&&e.push({name:"confirmPassword",message:"Password does not match"}),i.serialNumber||e.push({name:"serialNumber",message:"Required"}),e};return(i,e)=>{const u=ie,o=oe,l=se;return g(),y(l,{state:s.value,validate:a,class:"flex flex-col gap-4"},{default:d(()=>[m(o,{label:"姓名",name:"name"},{default:d(()=>[m(u,{modelValue:s.value.name,"onUpdate:modelValue":e[0]||(e[0]=n=>s.value.name=n),class:"w-full"},null,8,["modelValue"])]),_:1}),m(o,{label:"Email",name:"email"},{default:d(()=>[m(u,{modelValue:s.value.email,"onUpdate:modelValue":e[1]||(e[1]=n=>s.value.email=n),class:"w-full"},null,8,["modelValue"])]),_:1}),m(o,{label:"密碼",name:"password"},{default:d(()=>[m(u,{modelValue:s.value.password,"onUpdate:modelValue":e[2]||(e[2]=n=>s.value.password=n),type:"password",class:"w-full"},null,8,["modelValue"])]),_:1}),m(o,{label:"確認密碼",name:"confirmPassword"},{default:d(()=>[m(u,{modelValue:s.value.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=n=>s.value.confirmPassword=n),type:"password",class:"w-full"},null,8,["modelValue"])]),_:1}),m(o,{label:"序號",name:"serialNumber"},{default:d(()=>[m(u,{modelValue:s.value.serialNumber,"onUpdate:modelValue":e[4]||(e[4]=n=>s.value.serialNumber=n),class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1},8,["state"])}}}),Ze=V({__name:"login",async setup(v){let s,a;const i=Te(),e=z({data:{login:{email:"",password:""},register:{name:"",email:"",password:"",confirmPassword:"",serialNumber:""}}}),{data:u,execute:o,error:l,status:n}=([s,a]=N(()=>H.login(e.value.data.login)),s=await s,a(),s),{data:r,execute:c,status:p,error:f}=([s,a]=N(()=>H.register(e.value.data.register)),s=await s,a(),s),{data:w,refresh:$}=([s,a]=N(()=>H.checkValidToken()),s=await s,a(),s),S=[{label:"登入",icon:"i-lucide-user",slot:"login"},{label:"註冊",icon:"i-lucide-lock",slot:"register"}],A=async()=>{var h,x;const{login:b}=e.value.data;if(await o(),l.value){i.add({title:"錯誤帳號或密碼",color:"error"}),console.error(l.value),b.password="";return}P(M.AccessToken).value=(h=u.value)==null?void 0:h.token.accessTokenJWT,P(M.RefreshToken).value=(x=u.value)==null?void 0:x.token.refreshTokenJWT,q(E.Home)},F=async()=>{var h,x;const{register:b}=e.value.data;if(await c(),f.value){i.add({title:"錯誤序號或重複註冊",color:"error"}),b.serialNumber="",b.password="",b.confirmPassword="";return}i.add({title:"註冊成功 請登入",color:"success"}),b.name="",b.email="",b.password="",b.confirmPassword="",b.serialNumber="",P(M.AccessToken).value=(h=r.value)==null?void 0:h.token.accessTokenJWT,P(M.RefreshToken).value=(x=r.value)==null?void 0:x.token.refreshTokenJWT,q(E.Home)};return D(async()=>{var b;await $(),((b=w.value)==null?void 0:b.msg)==="Token is valid"&&q(E.Home)}),(b,h)=>{const x=Ce,ue=De;return g(),y(ue,{items:S,class:"gap-4 w-full",ui:{trigger:"flex-1"}},{login:d(()=>[m(t(je),{modelValue:t(e).data.login,"onUpdate:modelValue":h[0]||(h[0]=K=>t(e).data.login=K)},null,8,["modelValue"]),m(x,{label:"登入",type:"submit",variant:"soft",class:"self-end",loading:t(n)==="pending",disabled:!t(e).data.login.email||!t(e).data.login.password||!t(e).data.login.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/),onClick:A},null,8,["loading","disabled"])]),register:d(()=>[m(t(Je),{modelValue:t(e).data.register,"onUpdate:modelValue":h[1]||(h[1]=K=>t(e).data.register=K)},null,8,["modelValue"]),m(x,{label:"註冊",type:"submit",variant:"soft",class:"self-end",loading:t(p)==="pending",disabled:!t(e).data.register.name||!t(e).data.register.email||!t(e).data.register.password||!t(e).data.register.confirmPassword||!t(e).data.register.serialNumber||!t(e).data.register.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)||t(e).data.register.password!==t(e).data.register.confirmPassword,onClick:F},null,8,["loading","disabled"])]),_:1})}}});export{Ze as default};
