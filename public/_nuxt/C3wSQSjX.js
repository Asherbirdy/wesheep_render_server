import{U as k,e as G,Q as U,D as g,c as u,a as n,b as R,w as d,k as c,O as N,o as s,d as m,t as l,S as h,T as y,n as x}from"./WA6nY-Hq.js";import{U as V}from"./BYk7egmn.js";import{_ as L}from"./DMUFUiEr.js";import{u as C}from"./DAwnPD3x.js";import"./DU_xYVhV.js";import"./Cn0AQL3X.js";const F={get:async()=>await C(k.BlendingGetAll,{method:"GET",server:!1,lazy:!0}),createFromSheet:async()=>await C(k.BlendingCreateFromSheet,{method:"GET",server:!1,lazy:!0,immediate:!1,watch:!1})},O={class:"flex justify-between items-center"},Q={class:"mb-4"},$={class:"flex flex-wrap gap-2"},H={class:"flex flex-wrap gap-2"},I={class:"flex flex-wrap gap-2"},Z=G({__name:"blending",async setup(J){let o,_;const{data:S,execute:A}=([o,_]=U(()=>F.get()),o=await o,_(),o),{execute:T,status:q}=([o,_]=U(()=>F.createFromSheet()),o=await o,_(),o),j=async()=>{await T(),await A()},f=g(()=>{var t;return(t=S.value)==null?void 0:t.response.filter(e=>e.name!=="")}),w=g(()=>{var t;return(t=f.value)==null?void 0:t.filter(e=>e.identity==="女介朋友"||e.identity==="男介朋友")}),r=t=>{var e;return((e=f.value)==null?void 0:e.filter(p=>p.ageRange===t).map(p=>p))||[]},B=g(()=>{var t;return((t=f.value)==null?void 0:t.filter(e=>e.selectSchedule==="週六_單日行程").map(e=>e))||[]}),z=g(()=>[{title:"年長報名",data:r("年長")},{title:"壯年報名",data:r("壯年")},{title:"青職報名",data:r("青職")},{title:"大學報名",data:r("大學")},{title:"青少年報名",data:r("青少年")},{title:"兒童報名",data:r("兒童")},{title:"六歲以下報名",data:r("六歲以下")}]),D=[{label:"報名名單",slot:"join"},{label:"福音朋友",slot:"gospel"},{label:"單日報名",slot:"oneDay"}];return(t,e)=>{const p=N,v=V,E=L;return s(),u("div",null,[n("div",O,[e[1]||(e[1]=n("h1",null,"2025年 全會所戶外相調",-1)),R(p,{color:"info",variant:"soft",size:"sm",loading:c(q)==="pending",onClick:j},{default:d(()=>e[0]||(e[0]=[m(" 更新 ")])),_:1},8,["loading"])]),R(E,{items:D,variant:"link",class:"gap-4 w-full",ui:{trigger:"flex-1"}},{join:d(()=>{var i;return[n("p",Q," 報名人數"+l((i=c(f))==null?void 0:i.length),1),(s(!0),u(h,null,y(c(z),a=>(s(),u("div",{key:a.title,class:"mb-4"},[n("p",null,l(a.title)+" ("+l(a.data.length)+"位):",1),n("div",$,[(s(!0),u(h,null,y(a.data,b=>(s(),x(v,{key:b._id,color:"info",variant:"soft"},{default:d(()=>[m(l(b.name),1)]),_:2},1024))),128))])]))),128))]}),gospel:d(()=>{var i;return[n("p",null,"福音朋友"+l((i=c(w))==null?void 0:i.length)+"位",1),n("div",H,[(s(!0),u(h,null,y(c(w),a=>(s(),x(v,{key:a._id,color:"info",variant:"soft"},{default:d(()=>[m(l(a.name)+" ("+l(a.ageRange)+") ",1)]),_:2},1024))),128))])]}),oneDay:d(()=>{var i;return[n("p",null,"週六單日報名"+l((i=c(B))==null?void 0:i.length)+"位",1),n("div",I,[(s(!0),u(h,null,y(c(B),a=>(s(),x(v,{key:a._id,color:"info",variant:"soft"},{default:d(()=>[m(l(a.name),1)]),_:2},1024))),128))])]}),_:1})])}}});export{Z as default};
