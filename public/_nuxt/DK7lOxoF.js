import{U as I}from"./DMGrH9gh.js";import{e as P,ai as M,v as L,ag as R,c as k,o as v,b as l,ah as S,l as e,w as u,aj as E,a8 as D,af as h,Z as q,a2 as N,S as T,a3 as $,a4 as K,h as U,j as A,A as O,ab as W,z as V,m as j,aw as Z,L as G,W as J,a as _,F as Q,r as X,t as w}from"./HxJPijIE.js";import{H as Y,P as ee}from"./DyGo171J.js";import{_ as z}from"./D4J8iB4E.js";import{u as x}from"./5FU1LBy6.js";import{a as te,b as ae,_ as oe}from"./DPjHm7U3.js";import{r as H}from"./DiGSp3wD.js";import"./BAJRQeT-.js";import"./BeSqGxqb.js";import"./DMtBr7_n.js";import"./HQmLrecV.js";import"./Cpz3bGiM.js";import"./R8dsGkxS.js";import"./CPtGQ7Mt.js";import"./BnchoiCd.js";import"./Ala1UYN5.js";const ne=P({__name:"CreateAttendanceAccountComponent",async setup(C){let i,a;const r=M(),o=L({data:{form:{name:"",serialNumber:""}},feature:{modal:{open:!1}}}),{execute:b,status:y}=([i,a]=R(()=>x.create(o.value.data.form)),i=await i,a(),i),f=async()=>{const{feature:n}=o.value;await b(),n.modal.open=!1,r.add({title:"新增成功",color:"success"}),await H(E.AttendanceAccount)};return(n,t)=>{const p=S,m=oe,s=ae,g=te,d=z;return v(),k("div",null,[l(p,{label:"新增",color:"primary",onClick:t[0]||(t[0]=c=>e(o).feature.modal.open=!0)}),l(d,{open:e(o).feature.modal.open,"onUpdate:open":t[4]||(t[4]=c=>e(o).feature.modal.open=c),title:"帳號資訊",ui:{footer:"justify-end"}},{body:u(()=>[l(g,{ui:{root:"space-y-4"}},{default:u(()=>[l(s,{label:"名稱",name:"name"},{default:u(()=>[l(m,{modelValue:e(o).data.form.name,"onUpdate:modelValue":t[1]||(t[1]=c=>e(o).data.form.name=c),label:"標題",ui:{root:"w-full"}},null,8,["modelValue"])]),_:1}),l(s,{label:"序號",name:"serialNumber"},{default:u(()=>[l(m,{modelValue:e(o).data.form.serialNumber,"onUpdate:modelValue":t[2]||(t[2]=c=>e(o).data.form.serialNumber=c),label:"序號",ui:{root:"w-full"}},null,8,["modelValue"])]),_:1})]),_:1})]),footer:u(()=>[l(p,{label:"取消",color:"neutral",variant:"outline",onClick:t[3]||(t[3]=c=>e(o).feature.modal.open=!1)}),l(p,{label:"確認",variant:"outline",disabled:!e(o).data.form.name||!e(o).data.form.serialNumber,loading:e(y)==="pending",onClick:f},null,8,["disabled","loading"])]),_:1},8,["open"])])}}}),le={slots:{content:"bg-(--ui-bg) shadow-lg rounded-[calc(var(--ui-radius)*1.5)] ring ring-(--ui-border) data-[state=open]:animate-[scale-in_100ms_ease-out] data-[state=closed]:animate-[scale-out_100ms_ease-in] focus:outline-none pointer-events-auto",arrow:"fill-(--ui-border)"}},se=h;var F;const re=D({extend:D(le),...((F=se.ui)==null?void 0:F.popover)||{}}),ue=P({__name:"Popover",props:{mode:{default:"click"},content:{},arrow:{type:[Boolean,Object]},portal:{type:Boolean,default:!0},dismissible:{type:Boolean,default:!0},class:{},ui:{},defaultOpen:{type:Boolean},open:{type:Boolean},modal:{type:Boolean},openDelay:{default:0},closeDelay:{default:0}},emits:["update:open"],setup(C,{emit:i}){const a=C,r=i,o=q(),b=a.mode==="hover"?N(a,"defaultOpen","open","openDelay","closeDelay"):N(a,"defaultOpen","open","modal"),y=T(b,r),f=$(()=>K(a.content,{side:"bottom",sideOffset:8,collisionPadding:8})),n=U(()=>a.dismissible?{}:{pointerDownOutside:s=>s.preventDefault(),interactOutside:s=>s.preventDefault(),escapeKeyDown:s=>s.preventDefault()}),t=$(()=>a.arrow),p=U(()=>re({side:f.value.side})),m=U(()=>a.mode==="hover"?Y:ee);return(s,g)=>(v(),A(e(m).Root,G(J(e(y))),{default:u(({open:d})=>[o.default?(v(),A(e(m).Trigger,{key:0,"as-child":"",class:W(a.class)},{default:u(()=>[V(s.$slots,"default",{open:d})]),_:2},1032,["class"])):O("",!0),l(e(m).Portal,{disabled:!s.portal},{default:u(()=>{var c;return[l(e(m).Content,j(f.value,{class:p.value.content({class:[!o.default&&a.class,(c=a.ui)==null?void 0:c.content]})},Z(n.value)),{default:u(()=>{var B;return[V(s.$slots,"content"),s.arrow?(v(),A(e(m).Arrow,j({key:0},t.value,{class:p.value.arrow({class:(B=a.ui)==null?void 0:B.arrow})}),null,16,["class"])):O("",!0)]}),_:3},16,["class"])]}),_:3},8,["disabled"])]),_:3},16))}}),de=Object.assign(ue,{__name:"UPopover"}),ie={class:"flex justify-between items-center"},Be=P({__name:"index",async setup(C){let i,a;const r=L({data:{form:{_id:"",name:"",serialNumber:"",serialNumberExpiredDate:"",active:!1,createdAt:"",updatedAt:"",__v:0}},feature:{modal:{open:!1},delete:{isLoading:!1},create:{isLoading:!1}}}),{data:o}=([i,a]=R(()=>x.getAll()),i=await i,a(),i),b=async()=>{const{data:f,feature:n}=r.value,{execute:t}=await x.delete({attendanceAccountId:f.form._id});n.delete.isLoading=!0,await t(),n.delete.isLoading=!1,await H(E.AttendanceAccount),n.modal.open=!1},y=f=>{const{feature:n,data:t}=r.value;n.modal.open=!0,t.form=f};return(f,n)=>{var g;const t=I,p=S,m=de,s=z;return v(),k("div",null,[_("div",ie,[n[2]||(n[2]=_("h1",null,"Attendance Account",-1)),l(e(ne))]),(v(!0),k(Q,null,X((g=e(o))==null?void 0:g.data,d=>(v(),A(t,{key:d._id,label:`${d.name} ${d.active?"":"(未啟動)"}`,color:d.active?"primary":"warning",onClick:c=>y(d)},null,8,["label","color","onClick"]))),128)),l(s,{open:e(r).feature.modal.open,"onUpdate:open":n[1]||(n[1]=d=>e(r).feature.modal.open=d),title:"帳號資訊",ui:{footer:"justify-end"}},{body:u(()=>[_("div",null,[_("p",null,"名字： "+w(e(r).data.form.name),1),_("p",null,"序號： "+w(e(r).data.form.serialNumber),1),_("p",null,"序號到期日： "+w(e(r).data.form.serialNumberExpiredDate),1),_("p",null,"啟用： "+w(e(r).data.form.active?"是":"否"),1)])]),footer:u(()=>[l(m,null,{content:u(()=>[l(p,{label:"確認刪除",color:"error",onClick:b})]),default:u(()=>[l(p,{label:"刪除",color:"neutral",variant:"subtle"})]),_:1}),l(p,{label:"確認",variant:"outline",onClick:n[0]||(n[0]=d=>e(r).feature.modal.open=!1)})]),_:1},8,["open"])])}}});export{Be as default};
