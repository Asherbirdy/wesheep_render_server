import{ai as D,e as h,ag as q,h as C,c as d,b as j,w as i,l as a,ah as tt,o as r,d as u,a as e,F as m,r as v,j as x,t as o}from"./Bwl4UcAB.js";import{U as et}from"./BYoB8N9j.js";import{_ as lt}from"./VtACcADc.js";import{u as rt}from"./teYQA1dA.js";import{R as O}from"./yGGtjXql.js";import{u as V}from"./Bbkn8Tn2.js";import"./Cwlhdts7.js";import"./bqPjc4_t.js";import"./Tl0vG3W9.js";import"./C29T0yL-.js";const z={getAll:async()=>await V(D.MeetingCenter,{method:"GET",server:!1}),create:async()=>await V(D.MeetingCenter,{method:"POST",server:!1,lazy:!0,immediate:!1})},nt={class:"flex flex-wrap gap-2"},st={class:"flex flex-wrap gap-2"},at={class:"flex flex-wrap gap-2"},ot={class:"flex flex-wrap gap-2"},it={class:"flex flex-wrap gap-2"},ut={class:"flex flex-wrap gap-2"},ft={class:"flex flex-wrap gap-2"},dt={class:"flex flex-wrap gap-2"},pt={class:"flex flex-wrap gap-2"},mt={class:"flex flex-wrap gap-2"},vt={class:"flex flex-wrap gap-2"},xt={class:"flex flex-wrap gap-2"},ct={class:"flex flex-wrap gap-2"},gt={class:"flex flex-wrap gap-2"},Bt=h({__name:"meetingCenter",async setup(_t){let y,R;const{data:S}=rt(D.UserShowMe),{data:L,refresh:P}=([y,R]=q(()=>z.getAll()),y=await y,R(),y),{execute:$,status:H}=([y,R]=q(()=>z.create()),y=await y,R(),y),_=C(()=>{var n;return(n=L.value)==null?void 0:n.data}),J=C(()=>{var n;return(n=_.value)==null?void 0:n.filter(t=>t.identity==="兒童")}),K=C(()=>{var n;return(n=_.value)==null?void 0:n.filter(t=>t.identity!=="兒童")}),U=C(()=>{var n;return(n=_.value)==null?void 0:n.filter(t=>t.districtName==="一區")}),M=C(()=>{var n;return(n=_.value)==null?void 0:n.filter(t=>t.districtName==="二區")}),T=C(()=>{var n;return(n=_.value)==null?void 0:n.filter(t=>t.districtName==="三區")}),B=C(()=>{var n;return(n=_.value)==null?void 0:n.filter(t=>t.districtName==="四區")}),Q=[{label:"報名名單",slot:"join"},{label:"搭乘遊覽車",slot:"departure"},{label:"自行前往",slot:"selfGo"}],W=async()=>{await $(),await P()},X=["男介朋友","女介朋友","兒童"],b=n=>X.includes(n),N=n=>n==="兒童"?"(兒童)":n==="男介朋友"||n==="女介朋友"?"(福音朋友)":"";return(n,t)=>{var E,F;const Y=tt,p=et,Z=lt;return r(),d("div",null,[j(Y,{size:"sm",variant:"soft",loading:a(H)==="pending",disabled:!(((E=a(S))==null?void 0:E.user.role)===a(O).admin||((F=a(S))==null?void 0:F.user.role)===a(O).dev),onClick:W},{default:i(()=>t[0]||(t[0]=[u(" 更新數據 ")])),_:1},8,["loading","disabled"]),j(Z,{items:Q,variant:"link",class:"gap-4 w-full",ui:{trigger:"flex-1"}},{join:i(()=>{var w,k,c;return[e("div",null,"6/8 港湖集中主日 報名："+o((w=a(_))==null?void 0:w.length)+"位",1),e("div",null,"成人"+o((k=a(K))==null?void 0:k.length)+"位,兒童"+o((c=a(J))==null?void 0:c.length)+"位",1),t[1]||(t[1]=e("p",{class:"text-sm text-red-600"},[u(" 請於5/27日前"),e("br"),u("協助調查是否搭乘遊覽車～謝謝 ")],-1)),t[2]||(t[2]=e("p",null,"一區",-1)),e("div",nt,[(r(!0),d(m,null,v(a(U),(s,g)=>(r(),x(p,{key:g,color:b(s.identity)?"success":"info",variant:"soft"},{default:i(()=>[u(o(s.name)+o(N(s.identity)),1)]),_:2},1032,["color"]))),128))]),t[3]||(t[3]=e("p",null,"二區",-1)),e("div",st,[(r(!0),d(m,null,v(a(M),(s,g)=>(r(),x(p,{key:g,color:b(s.identity)?"success":"info",variant:"soft"},{default:i(()=>[u(o(s.name)+o(N(s.identity)),1)]),_:2},1032,["color"]))),128))]),t[4]||(t[4]=e("p",null,"三區",-1)),e("div",at,[(r(!0),d(m,null,v(a(T),(s,g)=>(r(),x(p,{key:g,color:b(s.identity)?"success":"info",variant:"soft"},{default:i(()=>[u(o(s.name)+o(N(s.identity)),1)]),_:2},1032,["color"]))),128))]),t[5]||(t[5]=e("p",null,"四區",-1)),e("div",ot,[(r(!0),d(m,null,v(a(B),(s,g)=>(r(),x(p,{key:g,color:b(s.identity)?"success":"info",variant:"soft"},{default:i(()=>[u(o(s.name)+o(N(s.identity)),1)]),_:2},1032,["color"]))),128))])]}),departure:i(()=>{var w,k,c,s,g,G,A,I;return[e("div",null,[t[6]||(t[6]=e("p",null,"6/8 港湖集中主日 要搭遊覽車人位",-1)),t[7]||(t[7]=e("p",{class:"font-bold"}," 搭乘去程遊覽車(東湖->信基) ",-1)),t[8]||(t[8]=e("p",null,"一區:",-1)),e("div",it,[(r(!0),d(m,null,v((w=a(U))==null?void 0:w.filter(l=>l.departure==="搭乘去程"),(l,f)=>(r(),x(p,{key:f,color:"info",variant:"soft"},{default:i(()=>[u(o(l.name),1)]),_:2},1024))),128))]),t[9]||(t[9]=e("p",null,"二區:",-1)),e("div",ut,[(r(!0),d(m,null,v((k=a(M))==null?void 0:k.filter(l=>l.departure==="搭乘去程"),(l,f)=>(r(),x(p,{key:f,color:"info",variant:"soft"},{default:i(()=>[u(o(l.name),1)]),_:2},1024))),128))]),t[10]||(t[10]=e("p",null,"三區:",-1)),e("div",ft,[(r(!0),d(m,null,v((c=a(T))==null?void 0:c.filter(l=>l.departure==="搭乘去程"),(l,f)=>(r(),x(p,{key:f,color:"info",variant:"soft"},{default:i(()=>[u(o(l.name),1)]),_:2},1024))),128))]),t[11]||(t[11]=e("p",null,"四區:",-1)),e("div",dt,[(r(!0),d(m,null,v((s=a(B))==null?void 0:s.filter(l=>l.departure==="搭乘去程"),(l,f)=>(r(),x(p,{key:f,color:"info",variant:"soft"},{default:i(()=>[u(o(l.name),1)]),_:2},1024))),128))])]),t[12]||(t[12]=e("p",{class:"font-bold"}," 搭乘回程遊覽車(信基->東湖) ",-1)),t[13]||(t[13]=e("p",null,"一區:",-1)),e("div",pt,[(r(!0),d(m,null,v((g=a(U))==null?void 0:g.filter(l=>l.returnRide==="搭乘回程"),(l,f)=>(r(),x(p,{key:f,color:"info",variant:"soft"},{default:i(()=>[u(o(l.name),1)]),_:2},1024))),128))]),t[14]||(t[14]=e("p",null,"二區:",-1)),e("div",mt,[(r(!0),d(m,null,v((G=a(M))==null?void 0:G.filter(l=>l.returnRide==="搭乘回程"),(l,f)=>(r(),x(p,{key:f,color:"info",variant:"soft"},{default:i(()=>[u(o(l.name),1)]),_:2},1024))),128))]),t[15]||(t[15]=e("p",null,"三區:",-1)),e("div",vt,[(r(!0),d(m,null,v((A=a(T))==null?void 0:A.filter(l=>l.returnRide==="搭乘回程"),(l,f)=>(r(),x(p,{key:f,color:"info",variant:"soft"},{default:i(()=>[u(o(l.name),1)]),_:2},1024))),128))]),t[16]||(t[16]=e("p",null,"四區:",-1)),e("div",xt,[(r(!0),d(m,null,v((I=a(B))==null?void 0:I.filter(l=>l.returnRide==="搭乘回程"),(l,f)=>(r(),x(p,{key:f,color:"info",variant:"soft"},{default:i(()=>[u(o(l.name),1)]),_:2},1024))),128))])]}),selfGo:i(()=>{var w,k;return[t[17]||(t[17]=e("p",null,"自行前往(早):",-1)),e("div",ct,[(r(!0),d(m,null,v((w=a(_))==null?void 0:w.filter(c=>c.departure==="自行前往"),(c,s)=>(r(),x(p,{key:s,color:"info",variant:"soft"},{default:i(()=>[u(o(c.name),1)]),_:2},1024))),128))]),t[18]||(t[18]=e("p",null,"不搭回程(午):",-1)),e("div",gt,[(r(!0),d(m,null,v((k=a(_))==null?void 0:k.filter(c=>c.returnRide==="不搭回程"),(c,s)=>(r(),x(p,{key:s,color:"info",variant:"soft"},{default:i(()=>[u(o(c.name),1)]),_:2},1024))),128))])]}),_:1})])}}});export{Bt as default};
