import{e as h,p as O,q as P,x as k,v as d,s as w,j as G,o as M,w as b,b as N,l as u,P as V,z as _}from"./kcoFBQyJ.js";import{f as $,E as j,a as A}from"./V55IL3xj.js";import{u as D}from"./ruGseRAe.js";const[Y,U]=O("RovingFocusGroup"),H=h({__name:"RovingFocusGroup",props:{orientation:{default:void 0},dir:{},loop:{type:Boolean,default:!1},currentTabStopId:{},defaultCurrentTabStopId:{},preventScrollOnEntryFocus:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["entryFocus","update:currentTabStopId"],setup(F,{expose:I,emit:T}){const a=F,f=T,{loop:C,orientation:p,dir:S}=P(a),v=D(S),i=k(a,"currentTabStopId",f,{defaultValue:a.defaultCurrentTabStopId,passive:a.currentTabStopId===void 0}),s=d(!1),r=d(!1),l=d(0),{getItems:m,CollectionSlot:g}=w({isProvider:!0});function y(e){const o=!r.value;if(e.currentTarget&&e.target===e.currentTarget&&o&&!s.value){const n=new CustomEvent(j,A);if(e.currentTarget.dispatchEvent(n),f("entryFocus",n),!n.defaultPrevented){const c=m().map(t=>t.ref).filter(t=>t.dataset.disabled!==""),B=c.find(t=>t.getAttribute("data-active")==="true"),x=c.find(t=>t.id===i.value),R=[B,x,...c].filter(Boolean);$(R,a.preventScrollOnEntryFocus)}}r.value=!1}function E(){setTimeout(()=>{r.value=!1},1)}return I({getItems:m}),U({loop:C,dir:v,orientation:p,currentTabStopId:i,onItemFocus:e=>{i.value=e},onItemShiftTab:()=>{s.value=!0},onFocusableItemAdd:()=>{l.value++},onFocusableItemRemove:()=>{l.value--}}),(e,o)=>(M(),G(u(g),null,{default:b(()=>[N(u(V),{tabindex:s.value||l.value===0?-1:0,"data-orientation":u(p),as:e.as,"as-child":e.asChild,dir:u(v),style:{outline:"none"},onMousedown:o[0]||(o[0]=n=>r.value=!0),onMouseup:E,onFocus:y,onBlur:o[1]||(o[1]=n=>s.value=!1)},{default:b(()=>[_(e.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}});export{H as _,Y as i};
