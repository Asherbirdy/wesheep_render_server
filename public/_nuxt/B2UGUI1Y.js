var Se=Object.defineProperty;var Fe=(i,a,s)=>a in i?Se(i,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[a]=s;var Q=(i,a,s)=>Fe(i,typeof a!="symbol"?a+"":a,s);import{e as ee,l as ke,n as M,o as h,w as Y,j as z,p as te,k as u,P as re,Z as pe,C as ze,$ as Be,af as $e,ag as Ae,ah as Ee,D as E,E as N,r as D,m as ie,a as se,c as U,y as A,F as p,ai as me,aj as Oe,ak as _e,G as ne,al as Ie,am as xe,an as G,ao as Pe,b as je,d as R,t as J,ap as Ve,aq as fe,ar as ve,a5 as Te,as as X,at as Ce,au as qe,av as De,a9 as Ue,aw as Ge,U as ae,aa as he}from"./BBMTw2H-.js";import{u as Me}from"./Bt_mxpY_.js";import{u as L}from"./Bj1ubAW6.js";const Ne=ee({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{default:"label"}},setup(i){const a=i;return ke(),(s,e)=>(h(),M(u(re),te(a,{onMousedown:e[0]||(e[0]=o=>{!o.defaultPrevented&&o.detail>1&&o.preventDefault()})}),{default:Y(()=>[z(s.$slots,"default")]),_:3},16))}}),Ke={slots:{root:"relative inline-flex items-center",base:["w-full rounded-[calc(var(--ui-radius)*1.5)] border-0 placeholder:text-(--ui-text-dimmed) focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"],leading:"absolute inset-y-0 start-0 flex items-center",leadingIcon:"shrink-0 text-(--ui-text-dimmed)",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailing:"absolute inset-y-0 end-0 flex items-center",trailingIcon:"shrink-0 text-(--ui-text-dimmed)"},variants:{buttonGroup:{horizontal:{root:"group",base:"group-not-only:group-first:rounded-e-none group-not-only:group-last:rounded-s-none group-not-last:group-not-first:rounded-none"},vertical:{root:"group",base:"group-not-only:group-first:rounded-b-none group-not-only:group-last:rounded-t-none group-not-last:group-not-first:rounded-none"}},size:{xs:{base:"px-2 py-1 text-xs gap-1",leading:"ps-2",trailing:"pe-2",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},sm:{base:"px-2.5 py-1.5 text-xs gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},md:{base:"px-2.5 py-1.5 text-sm gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},lg:{base:"px-3 py-2 text-sm gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"px-3 py-2 text-base gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-6",leadingAvatarSize:"xs",trailingIcon:"size-6"}},variant:{outline:"text-(--ui-text-highlighted) bg-(--ui-bg) ring ring-inset ring-(--ui-border-accented)",soft:"text-(--ui-text-highlighted) bg-(--ui-bg-elevated)/50 hover:bg-(--ui-bg-elevated) focus:bg-(--ui-bg-elevated) disabled:bg-(--ui-bg-elevated)/50",subtle:"text-(--ui-text-highlighted) bg-(--ui-bg-elevated) ring ring-inset ring-(--ui-border-accented)",ghost:"text-(--ui-text-highlighted) bg-transparent hover:bg-(--ui-bg-elevated) focus:bg-(--ui-bg-elevated) disabled:bg-transparent dark:disabled:bg-transparent",none:"text-(--ui-text-highlighted) bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},leading:{true:""},trailing:{true:""},loading:{true:""},highlight:{true:""},type:{file:"file:me-1.5 file:font-medium file:text-(--ui-text-muted) file:outline-none"}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-primary)"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-secondary)"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-success)"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-info)"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-warning)"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-error)"},{color:"primary",highlight:!0,class:"ring ring-inset ring-(--ui-primary)"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-(--ui-secondary)"},{color:"success",highlight:!0,class:"ring ring-inset ring-(--ui-success)"},{color:"info",highlight:!0,class:"ring ring-inset ring-(--ui-info)"},{color:"warning",highlight:!0,class:"ring ring-inset ring-(--ui-warning)"},{color:"error",highlight:!0,class:"ring ring-inset ring-(--ui-error)"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-border-inverted)"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-(--ui-border-inverted)"},{leading:!0,size:"xs",class:"ps-7"},{leading:!0,size:"sm",class:"ps-8"},{leading:!0,size:"md",class:"ps-9"},{leading:!0,size:"lg",class:"ps-10"},{leading:!0,size:"xl",class:"ps-11"},{trailing:!0,size:"xs",class:"pe-7"},{trailing:!0,size:"sm",class:"pe-8"},{trailing:!0,size:"md",class:"pe-9"},{trailing:!0,size:"lg",class:"pe-10"},{trailing:!0,size:"xl",class:"pe-11"},{loading:!0,leading:!0,class:{leadingIcon:"animate-spin"}},{loading:!0,leading:!1,trailing:!0,class:{trailingIcon:"animate-spin"}}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},Re=["id","type","value","name","placeholder","disabled","required","autocomplete"],Je=ne;var be;const Le=N({extend:N(Ke),...((be=Je.ui)==null?void 0:be.input)||{}}),We=ee({inheritAttrs:!1,__name:"Input",props:pe({as:{},id:{},name:{},type:{default:"text"},placeholder:{},color:{},variant:{},size:{},required:{type:Boolean},autocomplete:{default:"off"},autofocus:{type:Boolean},autofocusDelay:{default:0},disabled:{type:Boolean},highlight:{type:Boolean},class:{},ui:{},icon:{},avatar:{},leading:{type:Boolean},leadingIcon:{},trailing:{type:Boolean},trailingIcon:{},loading:{type:Boolean},loadingIcon:{}},{modelValue:{},modelModifiers:{}}),emits:pe(["update:modelValue","blur","change"],["update:modelValue"]),setup(i,{expose:a,emit:s}){const e=i,o=s,c=ze(),[m,g]=Be(i,"modelValue"),{emitFormBlur:l,emitFormInput:d,emitFormChange:b,size:F,color:O,id:k,name:B,highlight:_,disabled:P,emitFormFocus:y,ariaAttrs:I}=$e(e,{}),{orientation:Z,size:H}=Ae(e),{isLeading:t,isTrailing:n,leadingIconName:f,trailingIconName:x}=Ee(e),w=E(()=>H.value||F.value),v=E(()=>Le({type:e.type,color:O.value,variant:e.variant,size:w==null?void 0:w.value,loading:e.loading,highlight:_.value,leading:t.value||!!e.avatar||!!c.leading,trailing:n.value||!!c.trailing,buttonGroup:Z.value})),S=D(null);function j(){var r;e.autofocus&&((r=S.value)==null||r.focus())}function $(r){g.trim&&(r=(r==null?void 0:r.trim())??null),(g.number||e.type==="number")&&(r=_e(r)),g.nullify&&(r||(r=null)),m.value=r,d()}function V(r){g.lazy||$(r.target.value)}function T(r){const K=r.target.value;g.lazy&&$(K),g.trim&&(r.target.value=K.trim()),b(),o("change",r)}function C(r){l(),o("blur",r)}return a({inputRef:S}),ie(()=>{setTimeout(()=>{j()},e.autofocusDelay)}),(r,K)=>{var le;return h(),M(u(re),{as:r.as,class:p(v.value.root({class:[e.class,(le=e.ui)==null?void 0:le.root]}))},{default:Y(()=>{var oe,ue,ce;return[se("input",te({id:u(k),ref_key:"inputRef",ref:S,type:r.type,value:u(m),name:u(B),placeholder:r.placeholder,class:v.value.base({class:(oe=e.ui)==null?void 0:oe.base}),disabled:u(P),required:r.required,autocomplete:r.autocomplete},{...r.$attrs,...u(I)},{onInput:V,onBlur:C,onChange:T,onFocus:K[0]||(K[0]=(...q)=>u(y)&&u(y)(...q))}),null,16,Re),z(r.$slots,"default"),u(t)||r.avatar||c.leading?(h(),U("span",{key:0,class:p(v.value.leading({class:(ue=e.ui)==null?void 0:ue.leading}))},[z(r.$slots,"leading",{},()=>{var q,de,ge;return[u(t)&&u(f)?(h(),M(me,{key:0,name:u(f),class:p(v.value.leadingIcon({class:(q=e.ui)==null?void 0:q.leadingIcon}))},null,8,["name","class"])):r.avatar?(h(),M(Oe,te({key:1,size:((de=e.ui)==null?void 0:de.leadingAvatarSize)||v.value.leadingAvatarSize()},r.avatar,{class:v.value.leadingAvatar({class:(ge=e.ui)==null?void 0:ge.leadingAvatar})}),null,16,["size","class"])):A("",!0)]})],2)):A("",!0),u(n)||c.trailing?(h(),U("span",{key:1,class:p(v.value.trailing({class:(ce=e.ui)==null?void 0:ce.trailing}))},[z(r.$slots,"trailing",{},()=>{var q;return[u(x)?(h(),M(me,{key:0,name:u(x),class:p(v.value.trailingIcon({class:(q=e.ui)==null?void 0:q.trailingIcon}))},null,8,["name","class"])):A("",!0)]})],2)):A("",!0)]}),_:3},8,["as","class"])}}}),za=Object.assign(We,{__name:"UInput"}),Ye={slots:{root:"",wrapper:"",labelWrapper:"flex content-center items-center justify-between",label:"block font-medium text-(--ui-text)",container:"mt-1 relative",description:"text-(--ui-text-muted)",error:"mt-2 text-(--ui-error)",hint:"text-(--ui-text-muted)",help:"mt-2 text-(--ui-text-muted)"},variants:{size:{xs:{root:"text-xs"},sm:{root:"text-xs"},md:{root:"text-sm"},lg:{root:"text-sm"},xl:{root:"text-base"}},required:{true:{label:"after:content-['*'] after:ms-0.5 after:text-(--ui-error)"}}},defaultVariants:{size:"md"}},Ze=["id"],He=["id"],Qe=["id"],Xe=ne;var ye;const ea=N({extend:N(Ye),...((ye=Xe.ui)==null?void 0:ye.formField)||{}}),aa=ee({__name:"FormField",props:{as:{},name:{},errorPattern:{},label:{},description:{},help:{},error:{type:[String,Boolean]},hint:{},size:{},required:{type:Boolean},eagerValidation:{type:Boolean},validateOnInputDelay:{},class:{},ui:{}},setup(i){const a=i,s=ze(),e=E(()=>ea({size:a.size,required:a.required})),o=Ie("form-errors",null),c=E(()=>{var l,d;return a.error||((d=(l=o==null?void 0:o.value)==null?void 0:l.find(b=>b.name&&(b.name===a.name||a.errorPattern&&b.name.match(a.errorPattern))))==null?void 0:d.message)}),m=D(xe()),g=m.value;return G(Ve,m),G(Pe,E(()=>({error:c.value,name:a.name,size:a.size,eagerValidation:a.eagerValidation,validateOnInputDelay:a.validateOnInputDelay,errorPattern:a.errorPattern,hint:a.hint,description:a.description,ariaId:g}))),(l,d)=>{var b;return h(),M(u(re),{as:l.as,class:p(e.value.root({class:[a.class,(b=a.ui)==null?void 0:b.root]}))},{default:Y(()=>{var F,O,k,B,_,P,y,I;return[se("div",{class:p(e.value.wrapper({class:(F=a.ui)==null?void 0:F.wrapper}))},[l.label||s.label?(h(),U("div",{key:0,class:p(e.value.labelWrapper({class:(O=a.ui)==null?void 0:O.labelWrapper}))},[je(u(Ne),{for:m.value,class:p(e.value.label({class:(k=a.ui)==null?void 0:k.label}))},{default:Y(()=>[z(l.$slots,"label",{label:l.label},()=>[R(J(l.label),1)])]),_:3},8,["for","class"]),l.hint||s.hint?(h(),U("span",{key:0,id:`${u(g)}-hint`,class:p(e.value.hint({class:(B=a.ui)==null?void 0:B.hint}))},[z(l.$slots,"hint",{hint:l.hint},()=>[R(J(l.hint),1)])],10,Ze)):A("",!0)],2)):A("",!0),l.description||s.description?(h(),U("p",{key:1,id:`${u(g)}-description`,class:p(e.value.description({class:(_=a.ui)==null?void 0:_.description}))},[z(l.$slots,"description",{description:l.description},()=>[R(J(l.description),1)])],10,He)):A("",!0)],2),se("div",{class:p([(l.label||!!s.label||l.description||!!s.description)&&e.value.container({class:(P=a.ui)==null?void 0:P.container})])},[z(l.$slots,"default",{error:c.value}),typeof c.value=="string"&&c.value||s.error?(h(),U("p",{key:0,id:`${u(g)}-error`,class:p(e.value.error({class:(y=a.ui)==null?void 0:y.error}))},[z(l.$slots,"error",{error:c.value},()=>[R(J(c.value),1)])],10,Qe)):l.help||s.help?(h(),U("p",{key:1,class:p(e.value.help({class:(I=a.ui)==null?void 0:I.help}))},[z(l.$slots,"help",{help:l.help},()=>[R(J(l.help),1)])],2)):A("",!0)],2)]}),_:3},8,["as","class"])}}}),Ia=Object.assign(aa,{__name:"UFormField"});function ta(i){return i.validate&&i.__isYupSchema__}function ia(i){return i.inner!==void 0}function sa(i){return"schema"in i&&typeof i.coercer=="function"&&typeof i.validator=="function"&&typeof i.refiner=="function"}function ra(i){return i.validateAsync!==void 0&&i.id!==void 0}function na(i){return i.isJoi===!0}function la(i){return"~standard"in i}async function oa(i,a){var e;const s=await a["~standard"].validate(i);return s.issues?{errors:((e=s.issues)==null?void 0:e.map(o=>{var c;return{name:((c=o.path)==null?void 0:c.map(m=>typeof m=="object"?m.key:m).join("."))||"",message:o.message}}))||[],result:null}:{errors:null,result:s.value}}async function ua(i,a){try{return{errors:null,result:await a.validate(i,{abortEarly:!1})}}catch(s){if(ia(s))return{errors:s.inner.map(o=>({name:o.path??"",message:o.message})),result:null};throw s}}async function ca(i,a){const[s,e]=a.validate(i);return s?{errors:s.failures().map(c=>({message:c.message,name:c.path.join(".")})),result:null}:{errors:null,result:e}}async function da(i,a){try{return{errors:null,result:await a.validateAsync(i,{abortEarly:!1})}}catch(s){if(na(s))return{errors:s.details.map(o=>({name:o.path.join("."),message:o.message})),result:null};throw s}}function ga(i,a){if(la(a))return oa(i,a);if(ra(a))return da(i,a);if(ta(a))return ua(i,a);if(sa(a))return ca(i,a);throw new Error("Form validation failed: Unsupported form schema")}class W extends Error{constructor(s,e,o){super("Form validation exception");Q(this,"formId");Q(this,"errors");Q(this,"children");this.formId=s,this.errors=e,this.children=o,Object.setPrototypeOf(this,W.prototype)}}const pa={base:""},ma=ne;var we;const fa=N({extend:N(pa),...((we=ma.ui)==null?void 0:we.form)||{}}),va=ee({__name:"Form",props:{id:{},schema:{},state:{},validate:{},validateOn:{default(){return["input","blur","change"]}},disabled:{type:Boolean},validateOnInputDelay:{default:300},transform:{type:Boolean,default:!0},class:{},onSubmit:{}},emits:["submit","error"],setup(i,{expose:a,emit:s}){const e=i,o=s,c=e.id??xe(),m=Me(`form-${c}`),g=Ie(fe,void 0);G(fe,m);const l=D(new Map);ie(async()=>{m.on(async t=>{var n;t.type==="attach"?l.value.set(t.formId,{validate:t.validate}):t.type==="detach"?l.value.delete(t.formId):(n=e.validateOn)!=null&&n.includes(t.type)&&!I.value&&(t.type!=="input"?await y({name:t.name,silent:!0,nested:!1}):(t.eager||k.has(t.name))&&await y({name:t.name,silent:!0,nested:!1})),t.type==="blur"&&k.add(t.name),(t.type==="change"||t.type==="input"||t.type==="blur"||t.type==="focus")&&O.add(t.name),(t.type==="change"||t.type==="input")&&F.add(t.name)})}),ve(()=>{m.reset()}),ie(async()=>{g&&(await Te(),g.emit({type:"attach",validate:y,formId:c}))}),ve(()=>{g&&g.emit({type:"detach",formId:c})});const d=D([]);G("form-errors",d);const b=D({});G(Ge,b);const F=new Set,O=new Set,k=new Set;function B(t){return t.map(n=>{var f;return{...n,id:n!=null&&n.name?(f=b.value[n.name])==null?void 0:f.id:void 0}})}const _=D(null);async function P(){let t=e.validate?await e.validate(e.state)??[]:[];if(e.schema){const{errors:n,result:f}=await ga(e.state,e.schema);n?t=t.concat(n):_.value=f}return B(t)}async function y(t={silent:!1,nested:!0,transform:!1}){const n=t.name&&!Array.isArray(t.name)?[t.name]:t.name,f=!n&&t.nested?Array.from(l.value.values()).map(({validate:w})=>w(t).then(()=>{}).catch(v=>{if(!(v instanceof W))throw v;return v})):[];if(n){const w=d.value.filter(S=>!n.some(j=>{var V,T,C;const $=(T=(V=b.value)==null?void 0:V[j])==null?void 0:T.pattern;return j===S.name||$&&((C=S.name)==null?void 0:C.match($))})),v=(await P()).filter(S=>n.some(j=>{var V,T,C;const $=(T=(V=b.value)==null?void 0:V[j])==null?void 0:T.pattern;return j===S.name||$&&((C=S.name)==null?void 0:C.match($))}));d.value=w.concat(v)}else d.value=await P();const x=(await Promise.all(f)).filter(w=>w!==void 0);if(d.value.length+x.length>0){if(t.silent)return!1;throw new W(c,d.value,x)}return t.transform&&Object.assign(e.state,_.value),e.state}const I=D(!1);G(Ce,X(I));async function Z(t){var f;I.value=!0;const n=t;try{n.data=await y({nested:!0,transform:e.transform}),await((f=e.onSubmit)==null?void 0:f.call(e,n))}catch(x){if(!(x instanceof W))throw x;const w={...n,errors:x.errors,children:x.children};o("error",w)}finally{I.value=!1}}const H=E(()=>e.disabled||I.value);return G(qe,E(()=>({disabled:H.value,validateOnInputDelay:e.validateOnInputDelay}))),a({validate:y,errors:d,setErrors(t,n){n?d.value=d.value.filter(f=>f.name!==n).concat(B(t)):d.value=B(t)},async submit(){await Z(new Event("submit"))},getErrors(t){return t?d.value.filter(n=>n.name===t):d.value},clear(t){t?d.value=d.value.filter(n=>n.name!==t):d.value=[]},disabled:H,dirty:E(()=>!!F.size),dirtyFields:X(F),blurredFields:X(k),touchedFields:X(O)}),(t,n)=>(h(),M(Ue(u(g)?"div":"form"),{id:u(c),class:p(u(fa)({class:e.class})),onSubmit:De(Z,["prevent"])},{default:Y(()=>[z(t.$slots,"default",{errors:d.value})]),_:3},40,["id","class"]))}}),xa=Object.assign(va,{__name:"UForm"}),Sa={login:async i=>await L(he.Login,{method:"POST",body:i,server:!1,lazy:!0,immediate:!1,watch:!1}),register:async i=>await L(he.UserRegister,{method:"POST",body:i,server:!1,lazy:!0,immediate:!1,watch:!1}),checkValidToken:async()=>await L(ae.CheckValidToken,{method:"GET",server:!1,lazy:!0,immediate:!1,watch:!1}),sendOTP:async()=>await L(ae.SendOTP,{method:"GET",server:!1,lazy:!0,immediate:!1,watch:!1}),bindOTPEmail:async i=>await L(ae.BindOTPEmail,{method:"POST",body:i,server:!1,lazy:!0,immediate:!1,watch:!1})};export{xa as _,Ia as a,za as b,Sa as u};
