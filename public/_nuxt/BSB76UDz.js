var xe=Object.defineProperty;var ze=(i,a,r)=>a in i?xe(i,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[a]=r;var Q=(i,a,r)=>ze(i,typeof a!="symbol"?a+"":a,r);import{e as Z,E as we,l as N,o as h,w as Y,v as x,s as ee,i as u,P as ie,a0 as de,a7 as be,a1 as Se,ac as Fe,ad as Be,ae as $e,m as A,a3 as U,r as q,G as ae,a as te,c as G,D as _,a4 as p,af as ge,ag as ke,aB as _e,a6 as re,aC as ye,aD as Ie,aE as K,aF as Ae,b as Ee,d as L,t as T,aG as je,aH as pe,aI as me,L as Ve,aJ as X,aK as Oe,aL as Ce,H as De,S as Pe,aM as Me}from"./CjRUKRZB.js";import{u as qe}from"./Br5zpwwZ.js";const Ge=Z({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{default:"label"}},setup(i){const a=i;return we(),(r,e)=>(h(),N(u(ie),ee(a,{onMousedown:e[0]||(e[0]=o=>{!o.defaultPrevented&&o.detail>1&&o.preventDefault()})}),{default:Y(()=>[x(r.$slots,"default")]),_:3},16))}}),Ke={slots:{root:"relative inline-flex items-center",base:["w-full rounded-[calc(var(--ui-radius)*1.5)] border-0 placeholder:text-(--ui-text-dimmed) focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"],leading:"absolute inset-y-0 start-0 flex items-center",leadingIcon:"shrink-0 text-(--ui-text-dimmed)",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailing:"absolute inset-y-0 end-0 flex items-center",trailingIcon:"shrink-0 text-(--ui-text-dimmed)"},variants:{buttonGroup:{horizontal:{root:"group",base:"group-not-only:group-first:rounded-e-none group-not-only:group-last:rounded-s-none group-not-last:group-not-first:rounded-none"},vertical:{root:"group",base:"group-not-only:group-first:rounded-b-none group-not-only:group-last:rounded-t-none group-not-last:group-not-first:rounded-none"}},size:{xs:{base:"px-2 py-1 text-xs gap-1",leading:"ps-2",trailing:"pe-2",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},sm:{base:"px-2.5 py-1.5 text-xs gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},md:{base:"px-2.5 py-1.5 text-sm gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},lg:{base:"px-3 py-2 text-sm gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"px-3 py-2 text-base gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-6",leadingAvatarSize:"xs",trailingIcon:"size-6"}},variant:{outline:"text-(--ui-text-highlighted) bg-(--ui-bg) ring ring-inset ring-(--ui-border-accented)",soft:"text-(--ui-text-highlighted) bg-(--ui-bg-elevated)/50 hover:bg-(--ui-bg-elevated) focus:bg-(--ui-bg-elevated) disabled:bg-(--ui-bg-elevated)/50",subtle:"text-(--ui-text-highlighted) bg-(--ui-bg-elevated) ring ring-inset ring-(--ui-border-accented)",ghost:"text-(--ui-text-highlighted) bg-transparent hover:bg-(--ui-bg-elevated) focus:bg-(--ui-bg-elevated) disabled:bg-transparent dark:disabled:bg-transparent",none:"text-(--ui-text-highlighted) bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},leading:{true:""},trailing:{true:""},loading:{true:""},highlight:{true:""},type:{file:"file:me-1.5 file:font-medium file:text-(--ui-text-muted) file:outline-none"}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-primary)"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-secondary)"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-success)"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-info)"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-warning)"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-error)"},{color:"primary",highlight:!0,class:"ring ring-inset ring-(--ui-primary)"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-(--ui-secondary)"},{color:"success",highlight:!0,class:"ring ring-inset ring-(--ui-success)"},{color:"info",highlight:!0,class:"ring ring-inset ring-(--ui-info)"},{color:"warning",highlight:!0,class:"ring ring-inset ring-(--ui-warning)"},{color:"error",highlight:!0,class:"ring ring-inset ring-(--ui-error)"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-border-inverted)"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-(--ui-border-inverted)"},{leading:!0,size:"xs",class:"ps-7"},{leading:!0,size:"sm",class:"ps-8"},{leading:!0,size:"md",class:"ps-9"},{leading:!0,size:"lg",class:"ps-10"},{leading:!0,size:"xl",class:"ps-11"},{trailing:!0,size:"xs",class:"pe-7"},{trailing:!0,size:"sm",class:"pe-8"},{trailing:!0,size:"md",class:"pe-9"},{trailing:!0,size:"lg",class:"pe-10"},{trailing:!0,size:"xl",class:"pe-11"},{loading:!0,leading:!0,class:{leadingIcon:"animate-spin"}},{loading:!0,leading:!1,trailing:!0,class:{trailingIcon:"animate-spin"}}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},Ne=["id","type","value","name","placeholder","disabled","required","autocomplete"],Ue=re;var fe;const Je=U({extend:U(Ke),...((fe=Ue.ui)==null?void 0:fe.input)||{}}),Le=Z({inheritAttrs:!1,__name:"Input",props:de({as:{},id:{},name:{},type:{default:"text"},placeholder:{},color:{},variant:{},size:{},required:{type:Boolean},autocomplete:{default:"off"},autofocus:{type:Boolean},autofocusDelay:{default:0},disabled:{type:Boolean},highlight:{type:Boolean},class:{},ui:{},icon:{},avatar:{},leading:{type:Boolean},leadingIcon:{},trailing:{type:Boolean},trailingIcon:{},loading:{type:Boolean},loadingIcon:{}},{modelValue:{},modelModifiers:{}}),emits:de(["update:modelValue","blur","change"],["update:modelValue"]),setup(i,{expose:a,emit:r}){const e=i,o=r,c=be(),[m,g]=Se(i,"modelValue"),{emitFormBlur:l,emitFormInput:d,emitFormChange:b,size:F,color:E,id:B,name:$,highlight:j,disabled:V,emitFormFocus:y,ariaAttrs:z}=Fe(e,{deferInputValidation:!0}),{orientation:H,size:R}=Be(e),{isLeading:t,isTrailing:n,leadingIconName:f,trailingIconName:w}=$e(e),I=A(()=>R.value||F.value),v=A(()=>Je({type:e.type,color:E.value,variant:e.variant,size:I==null?void 0:I.value,loading:e.loading,highlight:j.value,leading:t.value||!!e.avatar||!!c.leading,trailing:n.value||!!c.trailing,buttonGroup:H.value})),S=q(null);function O(){var s;e.autofocus&&((s=S.value)==null||s.focus())}function k(s){g.trim&&(s=(s==null?void 0:s.trim())??null),(g.number||e.type==="number")&&(s=_e(s)),g.nullify&&(s||(s=null)),m.value=s,d()}function C(s){g.lazy||k(s.target.value)}function D(s){const J=s.target.value;g.lazy&&k(J),g.trim&&(s.target.value=J.trim()),b(),o("change",s)}function P(s){l(),o("blur",s)}return a({inputRef:S}),ae(()=>{setTimeout(()=>{O()},e.autofocusDelay)}),(s,J)=>{var se;return h(),N(u(ie),{as:s.as,class:p(v.value.root({class:[e.class,(se=e.ui)==null?void 0:se.root]}))},{default:Y(()=>{var ne,le,oe;return[te("input",ee({id:u(B),ref_key:"inputRef",ref:S,type:s.type,value:u(m),name:u($),placeholder:s.placeholder,class:v.value.base({class:(ne=e.ui)==null?void 0:ne.base}),disabled:u(V),required:s.required,autocomplete:s.autocomplete},{...s.$attrs,...u(z)},{onInput:C,onBlur:P,onChange:D,onFocus:J[0]||(J[0]=(...M)=>u(y)&&u(y)(...M))}),null,16,Ne),x(s.$slots,"default"),u(t)||s.avatar||c.leading?(h(),G("span",{key:0,class:p(v.value.leading({class:(le=e.ui)==null?void 0:le.leading}))},[x(s.$slots,"leading",{},()=>{var M,ue,ce;return[u(t)&&u(f)?(h(),N(ge,{key:0,name:u(f),class:p(v.value.leadingIcon({class:(M=e.ui)==null?void 0:M.leadingIcon}))},null,8,["name","class"])):s.avatar?(h(),N(ke,ee({key:1,size:((ue=e.ui)==null?void 0:ue.leadingAvatarSize)||v.value.leadingAvatarSize()},s.avatar,{class:v.value.leadingAvatar({class:(ce=e.ui)==null?void 0:ce.leadingAvatar})}),null,16,["size","class"])):_("",!0)]})],2)):_("",!0),u(n)||c.trailing?(h(),G("span",{key:1,class:p(v.value.trailing({class:(oe=e.ui)==null?void 0:oe.trailing}))},[x(s.$slots,"trailing",{},()=>{var M;return[u(w)?(h(),N(ge,{key:0,name:u(w),class:p(v.value.trailingIcon({class:(M=e.ui)==null?void 0:M.trailingIcon}))},null,8,["name","class"])):_("",!0)]})],2)):_("",!0)]}),_:3},8,["as","class"])}}}),ha=Object.assign(Le,{__name:"UInput"}),Te={slots:{root:"",wrapper:"",labelWrapper:"flex content-center items-center justify-between",label:"block font-medium text-(--ui-text)",container:"mt-1 relative",description:"text-(--ui-text-muted)",error:"mt-2 text-(--ui-error)",hint:"text-(--ui-text-muted)",help:"mt-2 text-(--ui-text-muted)"},variants:{size:{xs:{root:"text-xs"},sm:{root:"text-xs"},md:{root:"text-sm"},lg:{root:"text-sm"},xl:{root:"text-base"}},required:{true:{label:"after:content-['*'] after:ms-0.5 after:text-(--ui-error)"}}},defaultVariants:{size:"md"}},We=["id"],Ye=["id"],He=["id"],Re=re;var ve;const Qe=U({extend:U(Te),...((ve=Re.ui)==null?void 0:ve.formField)||{}}),Xe=Z({__name:"FormField",props:{as:{},name:{},errorPattern:{},label:{},description:{},help:{},error:{type:[String,Boolean]},hint:{},size:{},required:{type:Boolean},eagerValidation:{type:Boolean},validateOnInputDelay:{},class:{},ui:{}},setup(i){const a=i,r=be(),e=A(()=>Qe({size:a.size,required:a.required})),o=ye("form-errors",null),c=A(()=>{var l,d;return a.error||((d=(l=o==null?void 0:o.value)==null?void 0:l.find(b=>b.name&&(b.name===a.name||a.errorPattern&&b.name.match(a.errorPattern))))==null?void 0:d.message)}),m=q(Ie()),g=m.value;return K(je,m),K(Ae,A(()=>({error:c.value,name:a.name,size:a.size,eagerValidation:a.eagerValidation,validateOnInputDelay:a.validateOnInputDelay,errorPattern:a.errorPattern,hint:a.hint,description:a.description,ariaId:g}))),(l,d)=>{var b;return h(),N(u(ie),{as:l.as,class:p(e.value.root({class:[a.class,(b=a.ui)==null?void 0:b.root]}))},{default:Y(()=>{var F,E,B,$,j,V,y,z;return[te("div",{class:p(e.value.wrapper({class:(F=a.ui)==null?void 0:F.wrapper}))},[l.label||r.label?(h(),G("div",{key:0,class:p(e.value.labelWrapper({class:(E=a.ui)==null?void 0:E.labelWrapper}))},[Ee(u(Ge),{for:m.value,class:p(e.value.label({class:(B=a.ui)==null?void 0:B.label}))},{default:Y(()=>[x(l.$slots,"label",{label:l.label},()=>[L(T(l.label),1)])]),_:3},8,["for","class"]),l.hint||r.hint?(h(),G("span",{key:0,id:`${u(g)}-hint`,class:p(e.value.hint({class:($=a.ui)==null?void 0:$.hint}))},[x(l.$slots,"hint",{hint:l.hint},()=>[L(T(l.hint),1)])],10,We)):_("",!0)],2)):_("",!0),l.description||r.description?(h(),G("p",{key:1,id:`${u(g)}-description`,class:p(e.value.description({class:(j=a.ui)==null?void 0:j.description}))},[x(l.$slots,"description",{description:l.description},()=>[L(T(l.description),1)])],10,Ye)):_("",!0)],2),te("div",{class:p([(l.label||!!r.label||l.description||!!r.description)&&e.value.container({class:(V=a.ui)==null?void 0:V.container})])},[x(l.$slots,"default",{error:c.value}),typeof c.value=="string"&&c.value||r.error?(h(),G("p",{key:0,id:`${u(g)}-error`,class:p(e.value.error({class:(y=a.ui)==null?void 0:y.error}))},[x(l.$slots,"error",{error:c.value},()=>[L(T(c.value),1)])],10,He)):l.help||r.help?(h(),G("p",{key:1,class:p(e.value.help({class:(z=a.ui)==null?void 0:z.help}))},[x(l.$slots,"help",{help:l.help},()=>[L(T(l.help),1)])],2)):_("",!0)],2)]}),_:3},8,["as","class"])}}}),ba=Object.assign(Xe,{__name:"UFormField"});function Ze(i){return i.validate&&i.__isYupSchema__}function ea(i){return i.inner!==void 0}function aa(i){return"schema"in i&&typeof i.coercer=="function"&&typeof i.validator=="function"&&typeof i.refiner=="function"}function ta(i){return i.validateAsync!==void 0&&i.id!==void 0}function ia(i){return i.isJoi===!0}function ra(i){return"~standard"in i}async function sa(i,a){var e;const r=await a["~standard"].validate(i);return r.issues?{errors:((e=r.issues)==null?void 0:e.map(o=>{var c;return{name:((c=o.path)==null?void 0:c.map(m=>typeof m=="object"?m.key:m).join("."))||"",message:o.message}}))||[],result:null}:{errors:null,result:r.value}}async function na(i,a){try{return{errors:null,result:await a.validate(i,{abortEarly:!1})}}catch(r){if(ea(r))return{errors:r.inner.map(o=>({name:o.path??"",message:o.message})),result:null};throw r}}async function la(i,a){const[r,e]=a.validate(i);return r?{errors:r.failures().map(c=>({message:c.message,name:c.path.join(".")})),result:null}:{errors:null,result:e}}async function oa(i,a){try{return{errors:null,result:await a.validateAsync(i,{abortEarly:!1})}}catch(r){if(ia(r))return{errors:r.details.map(o=>({name:o.path.join("."),message:o.message})),result:null};throw r}}function ua(i,a){if(ra(a))return sa(i,a);if(ta(a))return oa(i,a);if(Ze(a))return na(i,a);if(aa(a))return la(i,a);throw new Error("Form validation failed: Unsupported form schema")}class W extends Error{constructor(r,e,o){super("Form validation exception");Q(this,"formId");Q(this,"errors");Q(this,"children");this.formId=r,this.errors=e,this.children=o,Object.setPrototypeOf(this,W.prototype)}}const ca={base:""},da=re;var he;const ga=U({extend:U(ca),...((he=da.ui)==null?void 0:he.form)||{}}),pa=Z({__name:"Form",props:{id:{},schema:{},state:{},validate:{},validateOn:{default(){return["input","blur","change"]}},disabled:{type:Boolean},validateOnInputDelay:{default:300},transform:{type:Boolean,default:!0},class:{},onSubmit:{}},emits:["submit","error"],setup(i,{expose:a,emit:r}){const e=i,o=r,c=e.id??Ie(),m=qe(`form-${c}`),g=ye(pe,void 0);K(pe,m);const l=q(new Map);ae(async()=>{m.on(async t=>{var n;t.type==="attach"?l.value.set(t.formId,{validate:t.validate}):t.type==="detach"?l.value.delete(t.formId):(n=e.validateOn)!=null&&n.includes(t.type)&&!z.value&&(t.type!=="input"?await y({name:t.name,silent:!0,nested:!1}):(t.eager||B.has(t.name))&&await y({name:t.name,silent:!0,nested:!1})),t.type==="blur"&&B.add(t.name),(t.type==="change"||t.type==="input"||t.type==="blur"||t.type==="focus")&&E.add(t.name),(t.type==="change"||t.type==="input")&&F.add(t.name)})}),me(()=>{m.reset()}),ae(async()=>{g&&(await Ve(),g.emit({type:"attach",validate:y,formId:c}))}),me(()=>{g&&g.emit({type:"detach",formId:c})});const d=q([]);K("form-errors",d);const b=q({});K(Me,b);const F=new Set,E=new Set,B=new Set;function $(t){return t.map(n=>{var f;return{...n,id:n!=null&&n.name?(f=b.value[n.name])==null?void 0:f.id:void 0}})}const j=q(null);async function V(){let t=e.validate?await e.validate(e.state)??[]:[];if(e.schema){const{errors:n,result:f}=await ua(e.state,e.schema);n?t=t.concat(n):j.value=f}return $(t)}async function y(t={silent:!1,nested:!0,transform:!1}){const n=t.name&&!Array.isArray(t.name)?[t.name]:t.name,f=!n&&t.nested?Array.from(l.value.values()).map(({validate:I})=>I(t).then(()=>{}).catch(v=>{if(!(v instanceof W))throw v;return v})):[];if(n){const I=d.value.filter(S=>!n.some(O=>{var C,D,P;const k=(D=(C=b.value)==null?void 0:C[O])==null?void 0:D.pattern;return O===S.name||k&&((P=S.name)==null?void 0:P.match(k))})),v=(await V()).filter(S=>n.some(O=>{var C,D,P;const k=(D=(C=b.value)==null?void 0:C[O])==null?void 0:D.pattern;return O===S.name||k&&((P=S.name)==null?void 0:P.match(k))}));d.value=I.concat(v)}else d.value=await V();const w=(await Promise.all(f)).filter(I=>I!==void 0);if(d.value.length+w.length>0){if(t.silent)return!1;throw new W(c,d.value,w)}return t.transform&&Object.assign(e.state,j.value),e.state}const z=q(!1);K(Oe,X(z));async function H(t){var f;z.value=!0;const n=t;try{n.data=await y({nested:!0,transform:e.transform}),await((f=e.onSubmit)==null?void 0:f.call(e,n))}catch(w){if(!(w instanceof W))throw w;const I={...n,errors:w.errors,children:w.children};o("error",I)}finally{z.value=!1}}const R=A(()=>e.disabled||z.value);return K(Ce,A(()=>({disabled:R.value,validateOnInputDelay:e.validateOnInputDelay}))),a({validate:y,errors:d,setErrors(t,n){n?d.value=d.value.filter(f=>f.name!==n).concat($(t)):d.value=$(t)},async submit(){await H(new Event("submit"))},getErrors(t){return t?d.value.filter(n=>n.name===t):d.value},clear(t){t?d.value=d.value.filter(n=>n.name!==t):d.value=[]},disabled:R,dirty:A(()=>!!F.size),dirtyFields:X(F),blurredFields:X(B),touchedFields:X(E)}),(t,n)=>(h(),N(Pe(u(g)?"div":"form"),{id:u(c),class:p(u(ga)({class:e.class})),onSubmit:De(H,["prevent"])},{default:Y(()=>[x(t.$slots,"default",{errors:d.value})]),_:3},40,["id","class"]))}}),ya=Object.assign(pa,{__name:"UForm"});export{ya as _,ba as a,ha as b};
