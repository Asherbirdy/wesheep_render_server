import{e as b,g as ie,h as re,r as U,i as ue,j as f,k as e,l as O,m as Z,n as m,o as r,w as u,p as h,P,q as G,b as w,s as de,v as L,x as ee,y as g,z as te,A as oe,B as ce,C as se,D as S,E as x,c as A,F as C,G as ae,H as pe,I as fe,J as me,K as ve,L as ye,M as ge,N as _e,d as q,t as $,a as E,O as ne,U as be,Q as N,R as we}from"./DISH5zJp.js";import{u as J,_ as Ce,a as he,b as $e}from"./CqYM4twN.js";import{u as z}from"./1QsrkLZL.js";import{g as Oe,_ as Be,u as De,a as Ee}from"./DbBo4nS_.js";import{u as ke}from"./OAI4w6od.js";const[B,Ae]=ie("DialogRoot"),Pe=b({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean,default:!1},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(c,{emit:n}){const t=c,o=re(t,"open",n,{defaultValue:t.defaultOpen,passive:t.open===void 0}),v=U(),y=U(),{modal:p}=ue(t);return Ae({open:o,modal:p,openModal:()=>{o.value=!0},onOpenChange:d=>{o.value=d},onOpenToggle:()=>{o.value=!o.value},contentId:"",titleId:"",descriptionId:"",triggerElement:v,contentElement:y}),(d,i)=>f(d.$slots,"default",{open:e(o)})}}),Fe=b({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(c){const n=c,t=B(),{forwardRef:s,currentElement:o}=O();return t.contentId||(t.contentId=z(void 0,"reka-dialog-content")),Z(()=>{t.triggerElement.value=o.value}),(v,y)=>(r(),m(e(P),h(n,{ref:e(s),type:v.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":e(t).open.value||!1,"aria-controls":e(t).open.value?e(t).contentId:void 0,"data-state":e(t).open.value?"open":"closed",onClick:e(t).onOpenToggle}),{default:u(()=>[f(v.$slots,"default")]),_:3},16,["type","aria-expanded","aria-controls","data-state","onClick"]))}}),le=b({__name:"DialogContentImpl",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(c,{emit:n}){const t=c,s=n,o=B(),{forwardRef:v,currentElement:y}=O();return o.titleId||(o.titleId=z(void 0,"reka-dialog-title")),o.descriptionId||(o.descriptionId=z(void 0,"reka-dialog-description")),Z(()=>{o.contentElement=y,G()!==document.body&&(o.triggerElement.value=G())}),(p,d)=>(r(),m(e(Be),{"as-child":"",loop:"",trapped:t.trapFocus,onMountAutoFocus:d[5]||(d[5]=i=>s("openAutoFocus",i)),onUnmountAutoFocus:d[6]||(d[6]=i=>s("closeAutoFocus",i))},{default:u(()=>[w(e(de),h({id:e(o).contentId,ref:e(v),as:p.as,"as-child":p.asChild,"disable-outside-pointer-events":p.disableOutsidePointerEvents,role:"dialog","aria-describedby":e(o).descriptionId,"aria-labelledby":e(o).titleId,"data-state":e(Oe)(e(o).open.value)},p.$attrs,{onDismiss:d[0]||(d[0]=i=>e(o).onOpenChange(!1)),onEscapeKeyDown:d[1]||(d[1]=i=>s("escapeKeyDown",i)),onFocusOutside:d[2]||(d[2]=i=>s("focusOutside",i)),onInteractOutside:d[3]||(d[3]=i=>s("interactOutside",i)),onPointerDownOutside:d[4]||(d[4]=i=>s("pointerDownOutside",i))}),{default:u(()=>[f(p.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),Me=b({__name:"DialogContentModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(c,{emit:n}){const t=c,s=n,o=B(),v=L(s),{forwardRef:y,currentElement:p}=O();return De(p),(d,i)=>(r(),m(le,h({...t,...e(v)},{ref:e(y),"trap-focus":e(o).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:i[0]||(i[0]=l=>{var a;l.defaultPrevented||(l.preventDefault(),(a=e(o).triggerElement.value)==null||a.focus())}),onPointerDownOutside:i[1]||(i[1]=l=>{const a=l.detail.originalEvent,_=a.button===0&&a.ctrlKey===!0;(a.button===2||_)&&l.preventDefault()}),onFocusOutside:i[2]||(i[2]=l=>{l.preventDefault()})}),{default:u(()=>[f(d.$slots,"default")]),_:3},16,["trap-focus"]))}}),Ie=b({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(c,{emit:n}){const t=c,o=L(n);O();const v=B(),y=U(!1),p=U(!1);return(d,i)=>(r(),m(le,h({...t,...e(o)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:i[0]||(i[0]=l=>{var a;l.defaultPrevented||(y.value||(a=e(v).triggerElement.value)==null||a.focus(),l.preventDefault()),y.value=!1,p.value=!1}),onInteractOutside:i[1]||(i[1]=l=>{var D;l.defaultPrevented||(y.value=!0,l.detail.originalEvent.type==="pointerdown"&&(p.value=!0));const a=l.target;((D=e(v).triggerElement.value)==null?void 0:D.contains(a))&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&p.value&&l.preventDefault()})}),{default:u(()=>[f(d.$slots,"default")]),_:3},16))}}),Re=b({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(c,{emit:n}){const t=c,s=n,o=B(),v=L(s),{forwardRef:y}=O();return(p,d)=>(r(),m(e(ee),{present:p.forceMount||e(o).open.value},{default:u(()=>[e(o).modal.value?(r(),m(Me,h({key:0,ref:e(y)},{...t,...e(v),...p.$attrs}),{default:u(()=>[f(p.$slots,"default")]),_:3},16)):(r(),m(Ie,h({key:1,ref:e(y)},{...t,...e(v),...p.$attrs}),{default:u(()=>[f(p.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Ve=b({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean},as:{}},setup(c){const n=B();return Ee(!0),O(),(t,s)=>(r(),m(e(P),{as:t.as,"as-child":t.asChild,"data-state":e(n).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:u(()=>[f(t.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),Ue=b({__name:"DialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(c){const n=B(),{forwardRef:t}=O();return(s,o)=>{var v;return(v=e(n))!=null&&v.modal.value?(r(),m(e(ee),{key:0,present:s.forceMount||e(n).open.value},{default:u(()=>[w(Ve,h(s.$attrs,{ref:e(t),as:s.as,"as-child":s.asChild}),{default:u(()=>[f(s.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):g("",!0)}}}),Te=b({__name:"DialogClose",props:{asChild:{type:Boolean},as:{default:"button"}},setup(c){const n=c;O();const t=B();return(s,o)=>(r(),m(e(P),h(n,{type:s.as==="button"?"button":void 0,onClick:o[0]||(o[0]=v=>e(t).onOpenChange(!1))}),{default:u(()=>[f(s.$slots,"default")]),_:3},16,["type"]))}}),Q=b({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{default:"h2"}},setup(c){const n=c,t=B();return O(),(s,o)=>(r(),m(e(P),h(n,{id:e(t).titleId}),{default:u(()=>[f(s.$slots,"default")]),_:3},16,["id"]))}}),W=b({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{default:"p"}},setup(c){const n=c;O();const t=B();return(s,o)=>(r(),m(e(P),h(n,{id:e(t).descriptionId}),{default:u(()=>[f(s.$slots,"default")]),_:3},16,["id"]))}}),Ke=b({__name:"DialogPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(c){const n=c;return(t,s)=>(r(),m(e(ce),te(oe(n)),{default:u(()=>[f(t.$slots,"default")]),_:3},16))}}),je={slots:{root:"rounded-[calc(var(--ui-radius)*2)]",header:"p-4 sm:px-6",body:"p-4 sm:p-6",footer:"p-4 sm:px-6"},variants:{variant:{solid:{root:"bg-(--ui-bg-inverted) text-(--ui-bg)"},outline:{root:"bg-(--ui-bg) ring ring-(--ui-border) divide-y divide-(--ui-border)"},soft:{root:"bg-(--ui-bg-elevated)/50 divide-y divide-(--ui-border)"},subtle:{root:"bg-(--ui-bg-elevated)/50 ring ring-(--ui-border) divide-y divide-(--ui-border)"}}},defaultVariants:{variant:"outline"}},qe=ae;var X;const xe=x({extend:x(je),...((X=qe.ui)==null?void 0:X.card)||{}}),Ne=b({__name:"Card",props:{as:{},variant:{},class:{},ui:{}},setup(c){const n=c,t=se(),s=S(()=>xe({variant:n.variant}));return(o,v)=>{var y;return r(),m(e(P),{as:o.as,class:C(s.value.root({class:[n.class,(y=n.ui)==null?void 0:y.root]}))},{default:u(()=>{var p,d,i;return[t.header?(r(),A("div",{key:0,class:C(s.value.header({class:(p=n.ui)==null?void 0:p.header}))},[f(o.$slots,"header")],2)):g("",!0),t.default?(r(),A("div",{key:1,class:C(s.value.body({class:(d=n.ui)==null?void 0:d.body}))},[f(o.$slots,"default")],2)):g("",!0),t.footer?(r(),A("div",{key:2,class:C(s.value.footer({class:(i=n.ui)==null?void 0:i.footer}))},[f(o.$slots,"footer")],2)):g("",!0)]}),_:3},8,["as","class"])}}}),Se=Object.assign(Ne,{__name:"UCard"}),ze={slots:{overlay:"fixed inset-0 bg-(--ui-bg-elevated)/75",content:"fixed bg-(--ui-bg) divide-y divide-(--ui-border) flex flex-col focus:outline-none",header:"flex items-center gap-1.5 p-4 sm:px-6 min-h-16",wrapper:"",body:"flex-1 overflow-y-auto p-4 sm:p-6",footer:"flex items-center gap-1.5 p-4 sm:px-6",title:"text-(--ui-text-highlighted) font-semibold",description:"mt-1 text-(--ui-text-muted) text-sm",close:"absolute top-4 end-4"},variants:{transition:{true:{overlay:"data-[state=open]:animate-[fade-in_200ms_ease-out] data-[state=closed]:animate-[fade-out_200ms_ease-in]",content:"data-[state=open]:animate-[scale-in_200ms_ease-out] data-[state=closed]:animate-[scale-out_200ms_ease-in]"}},fullscreen:{true:{content:"inset-0"},false:{content:"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[calc(100vw-2rem)] max-w-lg max-h-[calc(100dvh-2rem)] sm:max-h-[calc(100dvh-4rem)] rounded-[calc(var(--ui-radius)*2)] shadow-lg ring ring-(--ui-border)"}}}},Le=ae;var Y;const He=x({extend:x(ze),...((Y=Le.ui)==null?void 0:Y.modal)||{}}),Ge=b({__name:"Modal",props:{title:{},description:{},content:{},overlay:{type:Boolean,default:!0},transition:{type:Boolean,default:!0},fullscreen:{type:Boolean},portal:{type:Boolean,default:!0},close:{type:[Boolean,Object],default:!0},closeIcon:{},dismissible:{type:Boolean,default:!0},class:{},ui:{},open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean,default:!0}},emits:["after:leave","update:open"],setup(c,{emit:n}){const t=c,s=n,o=se(),{t:v}=pe(),y=fe(),p=me(ve(t,"open","defaultOpen","modal"),s),d=ye(()=>t.content),i=S(()=>{const a={closeAutoFocus:_=>_.preventDefault()};return t.dismissible?a:{pointerDownOutside:_=>_.preventDefault(),interactOutside:_=>_.preventDefault(),escapeKeyDown:_=>_.preventDefault(),...a}}),l=S(()=>He({transition:t.transition,fullscreen:t.fullscreen}));return(a,_)=>(r(),m(e(Pe),te(oe(e(p))),{default:u(({open:D})=>[o.default?(r(),m(e(Fe),{key:0,"as-child":"",class:C(t.class)},{default:u(()=>[f(a.$slots,"default",{open:D})]),_:2},1032,["class"])):g("",!0),w(e(Ke),{disabled:!a.portal},{default:u(()=>{var T,K;return[a.overlay?(r(),m(e(Ue),{key:0,class:C(l.value.overlay({class:(T=t.ui)==null?void 0:T.overlay}))},null,8,["class"])):g("",!0),w(e(Re),h({class:l.value.content({class:[!o.default&&t.class,(K=t.ui)==null?void 0:K.content]})},d.value,{onAfterLeave:_[0]||(_[0]=F=>s("after:leave"))},ge(i.value)),{default:u(()=>[o.content&&(a.title||o.title||a.description||o.description)?(r(),m(e(_e),{key:0},{default:u(()=>[a.title||o.title?(r(),m(e(Q),{key:0},{default:u(()=>[f(a.$slots,"title",{},()=>[q($(a.title),1)])]),_:3})):g("",!0),a.description||o.description?(r(),m(e(W),{key:1},{default:u(()=>[f(a.$slots,"description",{},()=>[q($(a.description),1)])]),_:3})):g("",!0)]),_:3})):g("",!0),f(a.$slots,"content",{},()=>{var F,j,k;return[o.header||a.title||o.title||a.description||o.description||a.close||o.close?(r(),A("div",{key:0,class:C(l.value.header({class:(F=t.ui)==null?void 0:F.header}))},[f(a.$slots,"header",{},()=>{var M,I,R;return[E("div",{class:C(l.value.wrapper({class:(M=t.ui)==null?void 0:M.wrapper}))},[a.title||o.title?(r(),m(e(Q),{key:0,class:C(l.value.title({class:(I=t.ui)==null?void 0:I.title}))},{default:u(()=>[f(a.$slots,"title",{},()=>[q($(a.title),1)])]),_:3},8,["class"])):g("",!0),a.description||o.description?(r(),m(e(W),{key:1,class:C(l.value.description({class:(R=t.ui)==null?void 0:R.description}))},{default:u(()=>[f(a.$slots,"description",{},()=>[q($(a.description),1)])]),_:3},8,["class"])):g("",!0)],2),a.close||o.close?(r(),m(e(Te),{key:0,"as-child":""},{default:u(()=>[f(a.$slots,"close",{ui:l.value},()=>{var V;return[a.close?(r(),m(ne,h({key:0,icon:a.closeIcon||e(y).ui.icons.close,size:"md",color:"neutral",variant:"ghost","aria-label":e(v)("modal.close")},typeof a.close=="object"?a.close:{},{class:l.value.close({class:(V=t.ui)==null?void 0:V.close})}),null,16,["icon","aria-label","class"])):g("",!0)]})]),_:3})):g("",!0)]})],2)):g("",!0),o.body?(r(),A("div",{key:1,class:C(l.value.body({class:(j=t.ui)==null?void 0:j.body}))},[f(a.$slots,"body")],2)):g("",!0),o.footer?(r(),A("div",{key:2,class:C(l.value.footer({class:(k=t.ui)==null?void 0:k.footer}))},[f(a.$slots,"footer")],2)):g("",!0)]})]),_:3},16,["class"])]}),_:3},8,["disabled"])]),_:3},16))}}),Je=Object.assign(Ge,{__name:"UModal"}),Qe={showMe:async()=>ke(be.UserShowMe,{method:"GET",server:!1,lazy:!0})},We={class:"flex flex-col justify-between gap-4 h-full"},Xe={class:""},st=b({__name:"index",async setup(c){let n,t;const s=U({data:{emailVerifiedModal:{otp:""}},emailCountdown:{status:!1,time:60,countdown:0}}),{data:o}=([n,t]=N(()=>Qe.showMe()),n=await n,t(),n),{execute:v}=([n,t]=N(()=>J.sendOTP()),n=await n,t(),n),{execute:y}=([n,t]=N(()=>J.bindOTPEmail({OTP:s.value.data.emailVerifiedModal.otp})),n=await n,t(),n),p=async()=>{const{emailCountdown:l}=s.value;await v(),l.status=!0,l.countdown=l.time},d=async()=>{await y()};we(s.value.emailCountdown,l=>{if(l.countdown>0){setTimeout(()=>{s.value.emailCountdown.countdown--},1e3);return}s.value.emailCountdown.status=!1,s.value.emailCountdown.countdown=s.value.emailCountdown.time});const i=l=>{const a=[];return l.otp||a.push({name:"otp",message:"驗證碼不能為空"}),a};return(l,a)=>{const _=Se,D=ne,T=$e,K=he,F=Ce,j=Je;return r(),A("div",We,[w(_,null,{default:u(()=>{var k,M,I,R,V,H;return[E("h2",null,"姓名："+$((k=e(o))==null?void 0:k.user.name),1),E("h2",null,"電子信箱："+$((M=e(o))==null?void 0:M.user.email),1),E("h2",null,"區域："+$((I=e(o))==null?void 0:I.user.district.name),1),E("h2",null,"Email驗證："+$((R=e(o))==null?void 0:R.user.emailVerified),1),E("h2",null,"權限："+$((V=e(o))==null?void 0:V.user.role),1),E("h2",null,"網頁權限："+$((H=e(o))==null?void 0:H.user.landingPageAccess),1)]}),_:1}),w(j,{dismissible:!1,title:"Email驗證"},{body:u(()=>[w(F,{state:e(s).data.emailVerifiedModal,validate:i},{default:u(()=>[E("div",Xe,[w(K,{label:"驗證碼",name:"otp",class:"flex-1 justify-between w-full gap-4 mb-2"},{default:u(()=>[w(T,{modelValue:e(s).data.emailVerifiedModal.otp,"onUpdate:modelValue":a[0]||(a[0]=k=>e(s).data.emailVerifiedModal.otp=k),label:"驗證碼",class:"flex-1 w-[calc(100%-124px)] mr-1",placeholder:"請輸入驗證碼"},null,8,["modelValue"]),w(D,{disabled:e(s).emailCountdown.status,label:e(s).emailCountdown.status?`${e(s).emailCountdown.countdown}秒`:"寄送 Email 驗證",variant:"soft",class:"inline-block",onClick:p},null,8,["disabled","label"])]),_:1})])]),_:1},8,["state"]),w(D,{label:"驗證 Email",block:"",onClick:d})]),default:u(()=>[w(D,{label:"Email 驗證",block:""})]),_:1})])}}});export{st as default};
