import{U,e as V,g as F,n as g,c as f,a as l,b as R,w as c,i as o,l as L,o as n,d as m,t as s,F as h,m as v,j as w}from"./CTl1oznX.js";import{U as D}from"./eJwYv-S1.js";import{_ as O}from"./BEza2Rf3.js";import{u as C}from"./DlCxXzD7.js";import"./C0dNTGsZ.js";import"./vbm2w1uJ.js";import"./Co_A6Eka.js";const S={get:async()=>await C(U.BlendingGetAll,{method:"GET",server:!1,lazy:!0}),createFromSheet:async()=>await C(U.BlendingCreateFromSheet,{method:"GET",server:!1,lazy:!0,immediate:!1,watch:!1})},$={class:"flex justify-between items-center"},H={class:"mb-4"},I={class:"flex flex-wrap gap-2"},J={class:"flex flex-wrap gap-2"},K={class:"flex flex-wrap gap-2"},M={class:"flex flex-wrap gap-2"},ae=V({__name:"blending",async setup(P){let i,y;const{data:A,execute:j}=([i,y]=F(()=>S.get()),i=await i,y(),i),{execute:q,status:T}=([i,y]=F(()=>S.createFromSheet()),i=await i,y(),i),z=async()=>{await q(),await j()},p=g(()=>{var t;return(t=A.value)==null?void 0:t.response.filter(e=>e.name!=="")}),B=g(()=>{var t;return(t=p.value)==null?void 0:t.filter(e=>e.identity==="女介朋友"||e.identity==="男介朋友")}),u=t=>{var e;return((e=p.value)==null?void 0:e.filter(_=>_.ageRange===t).map(_=>_))||[]},b=g(()=>{var t;return((t=p.value)==null?void 0:t.filter(e=>e.selectSchedule==="週六_單日行程").map(e=>e))||[]}),k=g(()=>{var t;return((t=p.value)==null?void 0:t.filter(e=>e.selectSchedule==="只前往主日").map(e=>e))||[]}),E=g(()=>[{title:"年長報名",data:u("年長")},{title:"壯年報名",data:u("壯年")},{title:"青職報名",data:u("青職")},{title:"大學報名",data:u("大學")},{title:"青少年報名",data:u("青少年")},{title:"兒童報名",data:u("兒童")},{title:"六歲以下報名",data:u("六歲以下")}]),G=[{label:"報名名單",slot:"join"},{label:"福音朋友",slot:"gospel"},{label:"單日報名",slot:"oneDay"}];return(t,e)=>{const _=L,x=D,N=O;return n(),f("div",null,[l("div",$,[e[1]||(e[1]=l("h1",null,"2025年 全會所戶外相調",-1)),R(_,{color:"info",variant:"soft",size:"sm",loading:o(T)==="pending",onClick:z},{default:c(()=>e[0]||(e[0]=[m(" 更新 ")])),_:1},8,["loading"])]),R(N,{items:G,variant:"link",class:"gap-4 w-full",ui:{trigger:"flex-1"}},{join:c(()=>{var r;return[l("p",H," 報名人數"+s((r=o(p))==null?void 0:r.length),1),(n(!0),f(h,null,v(o(E),a=>(n(),f("div",{key:a.title,class:"mb-4"},[l("p",null,s(a.title)+" ("+s(a.data.length)+"位):",1),l("div",I,[(n(!0),f(h,null,v(a.data,d=>(n(),w(x,{key:d._id,color:"info",variant:"soft"},{default:c(()=>[m(s(d.name),1)]),_:2},1024))),128))])]))),128))]}),gospel:c(()=>{var r;return[l("p",null,"福音朋友"+s((r=o(B))==null?void 0:r.length)+"位",1),l("div",J,[(n(!0),f(h,null,v(o(B),a=>(n(),w(x,{key:a._id,color:"info",variant:"soft"},{default:c(()=>[m(s(a.name)+" ("+s(a.ageRange)+") ",1)]),_:2},1024))),128))])]}),oneDay:c(()=>{var r,a;return[l("p",null,"週六單日報名"+s((r=o(b))==null?void 0:r.length)+"位",1),l("div",K,[(n(!0),f(h,null,v(o(b),d=>(n(),w(x,{key:d._id,color:"info",variant:"soft"},{default:c(()=>[m(s(d.name),1)]),_:2},1024))),128))]),l("p",null,"只前往主日"+s((a=o(k))==null?void 0:a.length)+"位",1),l("div",M,[(n(!0),f(h,null,v(o(k),d=>(n(),w(x,{key:d._id,color:"info",variant:"soft"},{default:c(()=>[m(s(d.name),1)]),_:2},1024))),128))])]}),_:1})])}}});export{ae as default};
