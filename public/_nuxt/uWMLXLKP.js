import{ai as D,e as te,ag as O,h as R,c as f,b as V,w as i,l as s,ah as re,o as l,d as u,a as t,F as c,r as m,j as _,t as a}from"./CUmCUkJp.js";import{U as le}from"./zzq5l5Yj.js";import{_ as ne}from"./DP7FLkZ3.js";import{u as se}from"./2WZ0EiyL.js";import{R as z}from"./yGGtjXql.js";import{u as L}from"./DBzH_qEX.js";import"./DEM0ZUQO.js";import"./B_7avCj3.js";import"./Bht4QrSq.js";import"./CfbSr2Gk.js";const P={getAll:async()=>await L(D.MeetingCenter,{method:"GET",server:!1}),create:async()=>await L(D.MeetingCenter,{method:"POST",server:!1,lazy:!0,immediate:!1})},ae={class:"pb-20"},oe={class:"flex flex-wrap gap-2"},ie={class:"flex flex-wrap gap-2"},ue={class:"flex flex-wrap gap-2"},de={class:"flex flex-wrap gap-2"},fe={class:"font-bold"},pe={class:"flex flex-wrap gap-2"},ce={class:"flex flex-wrap gap-2"},me={class:"flex flex-wrap gap-2"},_e={class:"flex flex-wrap gap-2"},ve={class:"font-bold"},ge={class:"flex flex-wrap gap-2"},xe={class:"flex flex-wrap gap-2"},ye={class:"flex flex-wrap gap-2"},we={class:"flex flex-wrap gap-2"},ke={class:"flex flex-wrap gap-2"},Re={class:"flex flex-wrap gap-2"},Ge=te({__name:"meetingCenter",async setup(Ce){let y,C;const{data:S}=se(D.UserShowMe),{data:$,refresh:H}=([y,C]=O(()=>P.getAll()),y=await y,C(),y),{execute:J,status:K}=([y,C]=O(()=>P.create()),y=await y,C(),y),g=R(()=>{var n;return(n=$.value)==null?void 0:n.data}),Q=R(()=>{var n;return(n=g.value)==null?void 0:n.filter(e=>e.identity==="兒童")}),W=R(()=>{var n;return(n=g.value)==null?void 0:n.filter(e=>e.identity!=="兒童")}),U=R(()=>{var n;return(n=g.value)==null?void 0:n.filter(e=>e.districtName==="一區")}),M=R(()=>{var n;return(n=g.value)==null?void 0:n.filter(e=>e.districtName==="二區")}),T=R(()=>{var n;return(n=g.value)==null?void 0:n.filter(e=>e.districtName==="三區")}),B=R(()=>{var n;return(n=g.value)==null?void 0:n.filter(e=>e.districtName==="四區")}),X=[{label:"報名名單",slot:"join"},{label:"搭乘遊覽車",slot:"departure"},{label:"自行前往",slot:"selfGo"}],Y=async()=>{await J(),await H()},Z=["男介朋友","女介朋友","兒童"],b=n=>Z.includes(n),N=n=>n==="兒童"?"(兒童)":n==="男介朋友"||n==="女介朋友"?"(福音朋友)":"";return(n,e)=>{var E,F;const h=re,p=le,ee=ne;return l(),f("div",ae,[V(h,{size:"sm",variant:"soft",loading:s(K)==="pending",disabled:!(((E=s(S))==null?void 0:E.user.role)===s(z).admin||((F=s(S))==null?void 0:F.user.role)===s(z).dev),onClick:Y},{default:i(()=>e[0]||(e[0]=[u(" 更新數據 ")])),_:1},8,["loading","disabled"]),V(ee,{items:X,variant:"link",class:"gap-4 w-full",ui:{trigger:"flex-1"}},{join:i(()=>{var w,k,v;return[t("div",null,"6/8 港湖集中主日 報名："+a((w=s(g))==null?void 0:w.length)+"位",1),t("div",null,"成人"+a((k=s(W))==null?void 0:k.length)+"位,兒童"+a((v=s(Q))==null?void 0:v.length)+"位",1),e[1]||(e[1]=t("p",{class:"text-sm text-red-600"},[u(" 請於5/27日前"),t("br"),u("協助調查是否搭乘遊覽車～謝謝 ")],-1)),e[2]||(e[2]=t("p",null,"一區",-1)),t("div",oe,[(l(!0),f(c,null,m(s(U),(o,x)=>(l(),_(p,{key:x,color:b(o.identity)?"success":"info",variant:"soft"},{default:i(()=>[u(a(o.name)+a(N(o.identity)),1)]),_:2},1032,["color"]))),128))]),e[3]||(e[3]=t("p",null,"二區",-1)),t("div",ie,[(l(!0),f(c,null,m(s(M),(o,x)=>(l(),_(p,{key:x,color:b(o.identity)?"success":"info",variant:"soft"},{default:i(()=>[u(a(o.name)+a(N(o.identity)),1)]),_:2},1032,["color"]))),128))]),e[4]||(e[4]=t("p",null,"三區",-1)),t("div",ue,[(l(!0),f(c,null,m(s(T),(o,x)=>(l(),_(p,{key:x,color:b(o.identity)?"success":"info",variant:"soft"},{default:i(()=>[u(a(o.name)+a(N(o.identity)),1)]),_:2},1032,["color"]))),128))]),e[5]||(e[5]=t("p",null,"四區",-1)),t("div",de,[(l(!0),f(c,null,m(s(B),(o,x)=>(l(),_(p,{key:x,color:b(o.identity)?"success":"info",variant:"soft"},{default:i(()=>[u(a(o.name)+a(N(o.identity)),1)]),_:2},1032,["color"]))),128))])]}),departure:i(()=>{var w,k,v,o,x,G,A,I,q,j;return[t("div",null,[e[6]||(e[6]=t("p",null,"6/8 港湖集中主日 要搭遊覽車人位",-1)),t("p",fe," 搭乘去程遊覽車(東湖->信基)("+a((w=s(g))==null?void 0:w.filter(r=>r.departure==="搭乘去程").length)+"人) ",1),e[7]||(e[7]=t("p",null,"一區:",-1)),t("div",pe,[(l(!0),f(c,null,m((k=s(U))==null?void 0:k.filter(r=>r.departure==="搭乘去程"),(r,d)=>(l(),_(p,{key:d,color:"info",variant:"soft"},{default:i(()=>[u(a(r.name),1)]),_:2},1024))),128))]),e[8]||(e[8]=t("p",null,"二區:",-1)),t("div",ce,[(l(!0),f(c,null,m((v=s(M))==null?void 0:v.filter(r=>r.departure==="搭乘去程"),(r,d)=>(l(),_(p,{key:d,color:"info",variant:"soft"},{default:i(()=>[u(a(r.name),1)]),_:2},1024))),128))]),e[9]||(e[9]=t("p",null,"三區:",-1)),t("div",me,[(l(!0),f(c,null,m((o=s(T))==null?void 0:o.filter(r=>r.departure==="搭乘去程"),(r,d)=>(l(),_(p,{key:d,color:"info",variant:"soft"},{default:i(()=>[u(a(r.name),1)]),_:2},1024))),128))]),e[10]||(e[10]=t("p",null,"四區:",-1)),t("div",_e,[(l(!0),f(c,null,m((x=s(B))==null?void 0:x.filter(r=>r.departure==="搭乘去程"),(r,d)=>(l(),_(p,{key:d,color:"info",variant:"soft"},{default:i(()=>[u(a(r.name),1)]),_:2},1024))),128))])]),t("p",ve," 搭乘回程遊覽車(信基->東湖)("+a((G=s(g))==null?void 0:G.filter(r=>r.returnRide==="搭乘回程").length)+"人) ",1),e[11]||(e[11]=t("p",null,"一區:",-1)),t("div",ge,[(l(!0),f(c,null,m((A=s(U))==null?void 0:A.filter(r=>r.returnRide==="搭乘回程"),(r,d)=>(l(),_(p,{key:d,color:"info",variant:"soft"},{default:i(()=>[u(a(r.name),1)]),_:2},1024))),128))]),e[12]||(e[12]=t("p",null,"二區:",-1)),t("div",xe,[(l(!0),f(c,null,m((I=s(M))==null?void 0:I.filter(r=>r.returnRide==="搭乘回程"),(r,d)=>(l(),_(p,{key:d,color:"info",variant:"soft"},{default:i(()=>[u(a(r.name),1)]),_:2},1024))),128))]),e[13]||(e[13]=t("p",null,"三區:",-1)),t("div",ye,[(l(!0),f(c,null,m((q=s(T))==null?void 0:q.filter(r=>r.returnRide==="搭乘回程"),(r,d)=>(l(),_(p,{key:d,color:"info",variant:"soft"},{default:i(()=>[u(a(r.name),1)]),_:2},1024))),128))]),e[14]||(e[14]=t("p",null,"四區:",-1)),t("div",we,[(l(!0),f(c,null,m((j=s(B))==null?void 0:j.filter(r=>r.returnRide==="搭乘回程"),(r,d)=>(l(),_(p,{key:d,color:"info",variant:"soft"},{default:i(()=>[u(a(r.name),1)]),_:2},1024))),128))])]}),selfGo:i(()=>{var w,k;return[e[15]||(e[15]=t("p",null,"自行前往(早):",-1)),t("div",ke,[(l(!0),f(c,null,m((w=s(g))==null?void 0:w.filter(v=>v.departure==="自行前往"),(v,o)=>(l(),_(p,{key:o,color:"info",variant:"soft"},{default:i(()=>[u(a(v.name),1)]),_:2},1024))),128))]),e[16]||(e[16]=t("p",null,"不搭回程(午):",-1)),t("div",Re,[(l(!0),f(c,null,m((k=s(g))==null?void 0:k.filter(v=>v.returnRide==="不搭回程"),(v,o)=>(l(),_(p,{key:o,color:"info",variant:"soft"},{default:i(()=>[u(a(v.name),1)]),_:2},1024))),128))])]}),_:1})])}}});export{Ge as default};
