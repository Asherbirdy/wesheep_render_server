import{U as B,e as G,Q as b,D as m,c,a as l,b as k,w as u,k as p,O as N,o,d as g,t as i,S as h,T as x,n as U}from"./CmAVDdhC.js";import{U as V}from"./dyFNCuu0.js";import{_ as D}from"./CCrGK8Xc.js";import{u as C}from"./ldovLZYt.js";import"./CVCRCBXL.js";import"./Cuc1cysf.js";const F={get:async()=>await C(B.BlendingGetAll,{method:"GET",server:!1,lazy:!0}),createFromSheet:async()=>await C(B.BlendingCreateFromSheet,{method:"GET",server:!1,lazy:!0,immediate:!1,watch:!1})},L={class:"flex justify-between items-center"},O={class:"mb-4"},Q={class:"flex flex-wrap gap-2"},$={class:"flex flex-wrap gap-2"},X=G({__name:"blending",async setup(H){let t,_;const{data:R,execute:A}=([t,_]=b(()=>F.get()),t=await t,_(),t),{execute:S,status:T}=([t,_]=b(()=>F.createFromSheet()),t=await t,_(),t),q=async()=>{await S(),await A()},f=m(()=>{var a;return(a=R.value)==null?void 0:a.response.filter(e=>e.name!=="")}),v=m(()=>{var a;return(a=f.value)==null?void 0:a.filter(e=>e.identity==="女介朋友"||e.identity==="男介朋友")}),s=a=>{var e;return((e=f.value)==null?void 0:e.filter(r=>r.ageRange===a).map(r=>r.name))||[]},j=m(()=>[{title:"年長報名",data:s("年長")},{title:"壯年報名",data:s("壯年")},{title:"青職報名",data:s("青職")},{title:"大學報名",data:s("大學")},{title:"青少年報名",data:s("青少年")},{title:"兒童報名",data:s("兒童")},{title:"六歲以下報名",data:s("六歲以下")}]),z=[{label:"報名名單",slot:"join"},{label:"福音朋友",slot:"gospel"}];return(a,e)=>{const r=N,w=V,E=D;return o(),c("div",null,[l("div",L,[e[1]||(e[1]=l("h1",null,"2025年 全會所戶外相調",-1)),k(r,{color:"info",variant:"soft",size:"sm",loading:p(T)==="pending",onClick:q},{default:u(()=>e[0]||(e[0]=[g(" 更新 ")])),_:1},8,["loading"])]),k(E,{items:z,variant:"link",class:"gap-4 w-full",ui:{trigger:"flex-1"}},{join:u(()=>{var d;return[l("p",O," 報名人數"+i((d=p(f))==null?void 0:d.length),1),(o(!0),c(h,null,x(p(j),n=>(o(),c("div",{key:n.title,class:"mb-4"},[l("p",null,i(n.title)+" ("+i(n.data.length)+"位):",1),l("div",Q,[(o(!0),c(h,null,x(n.data,y=>(o(),U(w,{key:y,color:"info",variant:"soft"},{default:u(()=>[g(i(y),1)]),_:2},1024))),128))])]))),128))]}),gospel:u(()=>{var d;return[l("p",null,"福音朋友"+i((d=p(v))==null?void 0:d.length)+"位",1),l("div",$,[(o(!0),c(h,null,x(p(v),n=>(o(),U(w,{key:n._id,color:"info",variant:"soft"},{default:u(()=>[g(i(n.name),1)]),_:2},1024))),128))])]}),_:1})])}}});export{X as default};
